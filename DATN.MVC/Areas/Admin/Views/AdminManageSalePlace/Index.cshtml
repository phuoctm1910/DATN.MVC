@model IEnumerable<DATN.MVC.Areas.Admin.Models.AdminSalePlace.Response.ViewSalePlace_Res>

<style>
    /* Định dạng bảng */
    .table {
        width: 100%;
        max-width: 1000px;
        margin: 20px auto;
        border-collapse: collapse;
        background-color: #ffffff;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
    }

    /* Header của bảng */
    .table thead {
        background-color: #007bff;
        color: #ffffff;
    }

    .table thead th {
        padding: 12px;
        font-weight: bold;
        text-align: left;
        font-size: 14px;
    }

    /* Các hàng dữ liệu */
    .table tbody tr {
        border-bottom: 1px solid #ddd;
        transition: background-color 0.3s;
    }

    /* Định dạng ô dữ liệu */
    .table tbody td {
        padding: 12px;
        font-size: 14px;
        color: #333;
    }

    /* Đổi màu khi di chuột qua hàng */
    .table tbody tr:hover {
        background-color: #f1f1f1;
    }
</style>

<h2 style="text-align: center;">Danh Sách Gian Hàng</h2>
<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Tên</th>
            <th>Người tạo</th>
            <th>Hình ảnh</th>
            <th>Trạng thái</th>
            <th>Hoạt động</th>

            <th>Hành động</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Id</td>
                <td>@item.Name</td>
                <td>@item.UserId</td>
                <td>
                    <img src="@item.Image" alt="Hình ảnh gian hàng" style="max-width: 100px; max-height: 100px;" />
                </td>
                <td>@(item.Status == 1 ? "Đang mở" : "Đang đóng")</td>
                <td>@(item.IsActived ? "Hoạt động" : "Không hoạt động")</td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-primary">Chỉnh sửa</a>
                    <button type="button" class="btn btn-danger" onclick="deleteSalePlace(@item.Id)">Xóa</button>
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts {
    <script>
        function deleteSalePlace(id) {
            if (confirm("Bạn có chắc chắn muốn xóa gian hàng này không?")) {
                $.ajax({
                    url: '@Url.Action("deleteSalePlace", "AdminManageSalePlace")' + '/' + id,
                    type: 'POST',
                    success: function (response) {
                        if (response.success) {
                            alert(response.message); // Thông báo từ server nếu xóa thành công
                            location.reload();
                        } else {
                            alert(response.message); // Thông báo từ server nếu có lỗi
                        }
                    },
                    error: function (xhr, status, error) {
                        alert('Có lỗi xảy ra khi xóa gian hàng');
                        console.error('Error:', error);
                    }
                });
            } else {
                console.log("Người dùng đã hủy hành động xóa");
            }
        }
    </script>
}
