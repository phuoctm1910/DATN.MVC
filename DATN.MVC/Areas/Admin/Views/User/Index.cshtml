@model IEnumerable<UserResponse>

<h1>Quản Lý Người Dùng</h1>

<!-- Card chứa bảng -->
<div class="card mb-4">
    <div class="card-header">
        <i class="fas fa-table me-1"></i>
        Danh Sách Người Dùng
    </div>
    <style>
        /* Căn giữa nội dung trong bảng */
        #datatablesUsers tbody td {
            text-align: center; 
            vertical-align: middle; 
        }

        #datatablesUsers thead th {
            text-align: center; 
        }
    </style>

    <div class="card-body">
        <table id="datatablesUsers" class="table table-striped table-bordered" style="margin-top: 20px;">
            <thead>
                <tr>
                    <th>Tài Khoản</th>
                    <th>Họ Và Tên</th>
                    <th>Số Điện Thoại</th>
                    <th>Trạng Thái</th>
                    <th>Hành Động</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model)
                {
                    <tr>
                        <td>@user.UserName</td>
                        <td>@user.FullName</td>
                        <td>@user.PhoneNumber</td>
                        <td>@(user.IsActived ? "Hoạt Động" : "Dừng Hoạt Động")</td>
                        <td>
                            <a href="/admin/user/edit?id=@user.Id" class="btn btn-primary btn-sm"><i class="fas fa-edit"></i> Chỉnh Sửa</a>
                            <form asp-action="Delete" method="post" style="display:inline;" onsubmit="return confirm('Bạn có chắc chắn muốn xóa người dùng này?');">
                                <input type="hidden" name="id" value="@user.Id" />
                                <button type="submit" class="btn btn-danger btn-sm"><i class="fas fa-trash-alt"></i> Xóa</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Khởi tạo DataTable
            $('#datatablesUsers').DataTable({
                responsive: true,
                paging: true,
                searching: true,
                ordering: true,
                info: true,
                lengthChange: true,
                pageLength: 5,
                lengthMenu: [5, 10, 15, 20],
                buttons: [
                    {
                        extend: 'copy',
                        text: 'Copy',
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4, 5, 6, 7]
                        }
                    },
                    {
                        extend: 'csv',
                        text: 'CSV',
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4, 5, 6, 7]
                        }
                    },
                    {
                        extend: 'excel',
                        text: 'Excel',
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4, 5, 6, 7]
                        }
                    },
                    {
                        extend: 'pdf',
                        text: 'PDF',
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4, 5, 6, 7]
                        }
                    }
                ],
                dom: '<"d-flex justify-content-between align-items-center"<"d-flex align-items-center"<"lengthMenu"l><"buttons ms-2"B>><"search"f>>rt<"d-flex justify-content-between align-items-center"<"info"i><"pagination"p>>',
                language: {
                    search: "Tìm kiếm theo tài khoản hoặc họ và tên:",
                    lengthMenu: "Hiển thị _MENU_ bản ghi",
                    info: "Hiển thị _START_ đến _END_ của _TOTAL_ bản ghi",
                    infoEmpty: "Không có bản ghi nào",
                    infoFiltered: "(lọc từ _MAX_ bản ghi)",
                    zeroRecords: "Không tìm thấy kết quả"
                }
            });
        });
    </script>
}
