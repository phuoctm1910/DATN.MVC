@model IEnumerable<DATN.MVC.Areas.Admin.Models.ManagerProduct.Response.ProductReadAllRes>

<h2 style="text-align: center;">Danh Sách Sản Phẩm</h2>
<div class="card mb-4">
    <div class="card-header">
        <i class="fas fa-table me-1"></i>
        Danh Sách
    </div>
    <div class="card-body">
        <table id="datatablesProduct" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th class="text-center align-middle">ID</th>
                    <th class="text-center align-middle">Tên</th>
                    <th class="text-center align-middle">Giá</th>
                    <th class="text-center align-middle">Số lượng</th>
                    <th class="text-center align-middle">Size</th>
                    <th class="text-center align-middle">Hình ảnh</th>
                    <th class="text-center align-middle">Trạng thái</th>
                    <th class="text-center align-middle">Hành động</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="text-center align-middle">
                        <td>@item.Id</td>
                        <td>@item.Name</td>
                        <td>@item.Price</td>
                        <td>@item.Quantity</td>
                        <td>@item.Size</td>
                        <td>
                            <img src="~/images/@item.Image" alt="" style="max-width: 100px;" />
                        </td>

                        <td>
                            <span style="color: @(item.IsActived ? "green" : "gray"); font-weight: bold;">
                                @(item.IsActived ? "Hoạt động" : "Không hoạt động")
                            </span>
                        </td>

                        <td class="text-center align-middle">
                            <!-- Nút Chỉnh sửa -->
                            <button type="button" class="btn btn-primary" onclick="openEditModal(@item.Id, @item.IsActived.ToString().ToLower())">Chỉnh sửa</button>

                            <!-- Nút Xóa -->
                            <button type="button" class="btn btn-danger" onclick="deleteProduct(@item.Id)">Xóa</button>
                        </td>


                    </tr>
                }
                @if (Model == null || !Model.Any())
                {
                    <tr>
                        <td colspan="8" class="text-center">Không có sản phẩm nào.</td>
                    </tr>
                }
                @if (ViewData["ErrorMessage"] != null)
                {
                    <div class="alert alert-danger">@ViewData["ErrorMessage"]</div>
                }

            </tbody>
        </table>
    </div>
</div>

<!-- Modal chỉnh sửa sản phẩm -->
<div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="editProductModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editProductModalLabel">Chỉnh sửa sản phẩm</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Form để chỉnh sửa sản phẩm -->
                <form id="editProductForm">
                    <input type="hidden" id="ProductId" name="ProductId" />
                    <div class="mb-3">
                        <label for="IsActive" class="form-label">Trạng thái</label>
                        <select id="IsActive" class="form-control">
                            <option value="true">Hoạt động</option>
                            <option value="false">Không Hoạt động</option>
                        </select>
                    </div>
                    <!-- Các trường chỉnh sửa khác của sản phẩm có thể thêm vào đây -->
                    <button type="submit" class="btn btn-primary">Cập nhật Trạng Thái</button>
                </form>
            </div>
        </div>
    </div>
</div>


@if (ViewData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">@ViewData["ErrorMessage"]</div>
}


@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    @*  <script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
    *@ <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vfs-fonts/3.0.0/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
    <!-- Thêm file script của bạn -->
    <script src="~/admin/js/datable-Product.js"></script>
}
