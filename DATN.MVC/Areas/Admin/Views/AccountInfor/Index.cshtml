@model IEnumerable<DATN.MVC.Areas.Admin.Models.AccountInfor.Response.AccountInforReadAllRes>

<h2 style="text-align: center;">Danh Sách Tài Khoản</h2>
<div class="card mb-4">
    <div class="card-header">
        <i class="fas fa-table me-1"></i>
        Danh Sách Tài Khoản
    </div>
    <div class="card-body">
        <table id="table" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th class="text-center align-middle">ID</th>
                    <th class="text-center align-middle">Tên đăng nhập</th>
                    <th class="text-center align-middle">Trạng thái</th>
                    <th class="text-center align-middle">Hành động</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var account in Model)
                {
                    <tr class="text-center align-middle">
                        <td>@account.Id</td>
                        <td>@account.UserName</td>
                        <td>
                            <span style="color: @(account.IsActived ? "green" : "gray"); font-weight: bold;">
                                @(account.IsActived ? "Hoạt động" : "Không hoạt động")
                            </span>
                        </td>
                        <td class="text-center align-middle">
                            <button type="button" class="btn btn-primary" onclick="openEditModal(@account.Id, '@account.UserName', @account.IsActived.ToString().ToLower())">Chỉnh Sửa</button>
                            <button type="button" class="btn btn-danger" onclick="deleteAccount(@account.Id)">Xóa</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<!-- Modal Sửa Tài Khoản -->
<div class="modal fade" id="editAccountModal" tabindex="-1" aria-labelledby="editAccountModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editAccountModalLabel">Chỉnh Sửa Trạng Thái Tài Khoản</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editAccountForm" method="post" action="/Admin/Account/Update">
                    <input type="hidden" id="EditId" name="Id" />
                    <div class="form-group">
                        <label for="EditIsActived">Trạng Thái Hoạt động:</label>
                        <select id="EditIsActived" name="IsActived" class="form-control" required>
                            <option value="true">Hoạt động</option>
                            <option value="false">Không Hoạt động</option>
                        </select>
                    </div>
                    <br />
                    <br />
                    <br />
                    <button type="submit" class="btn btn-primary">Cập nhật Trạng Thái</button>
                </form>
            </div>
        </div>
    </div>
</div>



@if (ViewData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">@ViewData["ErrorMessage"]</div>
}


@section Scripts {

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    @*  <script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
    *@ <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vfs-fonts/3.0.0/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>

    <script src="~/admin/js/datable-Account.js"></script> <!-- Chèn file JS -->
}
