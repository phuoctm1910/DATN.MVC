@{
    ViewData["Title"] = "Login";
}


@section Styles {
    <style>
        body {
            background-color: #e9eef4;
            margin-top: 150px;
            color: #474962;
            font-size: 14px;
            letter-spacing: 0.2px;
            padding-top: 160px; /* Tạo đủ khoảng trống cho cả menu và header */
        }

        .container {
            margin-top: 40px;
        }

        .recent-login {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        p {
            color: white;
        }

        .recent-login h4 {
            font-weight: bold;
            color: #535165;
        }

        .recent-login p {
            color: #727895;
            font-size: 12px;
            margin-bottom: 25px;
        }

        .recent-login .user-card {
            text-align: center;
            margin-right: 20px;
        }

        .recent-login img {
            border-radius: 50%;
            width: 90px;
            height: 90px;
            object-fit: cover;
        }

        .recent-login button {
            border: 1px dashed #727895;
            background: none;
            border-radius: 50%;
            width: 90px;
            height: 90px;
            font-size: 24px;
            color: #727895;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-box .form-login {
            margin-top: 20px;
        }

        .form-login input {
            background: #fff;
            border-radius: 35px;
            border: 1px solid grey;
            color: #535165;
            font-size: 14px;
            padding: 14px 20px;
            width: 100%;
            margin-bottom: 15px;
            outline: none; /* Remove the default focus outline */
            transition: border-color 0.3s, box-shadow 0.3s; /* Transition for smooth effects */
        }

            .form-login input:hover {
                border-color: #fa6342; /* Change border color on hover */
                box-shadow: 0 2px 5px rgba(250, 99, 66, 0.5); /* Add shadow on hover */
            }

            .form-login input:focus {
                border-color: rgb(182, 182, 182); /* Keep the border color consistent when focused */
                box-shadow: none; /* Remove any shadow on focus */
            }

        .form-login button {
            background-color: #fa6342;
            color: white;
            border-radius: 30px;
            padding: 10px 30px;
            border: none;
            transition: background-color 0.3s, transform 0.3s; /* Transition for button effects */
        }

            .form-login button:hover {
                background-color: #ff7f5c; /* Change button color on hover */
                transform: scale(1.05); /* Slightly enlarge the button */
            }

        .register-info {
            text-align: center;
            font-size: 12px;
            margin-top: 15px;
        }

            .register-info a {
                color: blue;
                text-decoration: underline;
            }
    </style>
}
@section Scripts {
    <script>
        // Xử lý sự kiện submit của form đăng nhập
        $('#loginForm').submit(function (e) {
            e.preventDefault(); // Ngăn chặn hành động mặc định của form

            var loginRequest = {
                userName: $('#username').val(),
                passwordHash: $('#password').val()
            };

        .login-info {
            font-size: 12px;
            color: #727895;
            margin-top: 10px;
        }

            .login-info a {
                color: #fa6342;
                text-decoration: none;
            }

        .total {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

            .total img {
                width: 100px;
                margin-bottom: 10px;
            }

            .total span {
                font-size: 18px;
                color: #333;
                margin-top: 10px;
            }

            .total em {
                font-size: 24px;
                color: #fa6342;
                margin-top: 5px;
                font-style: normal;
            }

        .page-header {
            background: #484874;
            color: #fff;
            padding: 20px 15px;
            height: 250px;
            text-align: center;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 10; /* Để header hiển thị phía trên các thành phần khác */
        }

        .error-message {
            color: red;
            font-size: 12px;
            margin-top: 5px;
            display: none; /* Mặc định ẩn thông báo lỗi */
        }
    </style>
}
@section Scripts {
    <script>
        $('#loginForm').submit(function (e) {
            e.preventDefault(); // Ngăn chặn hành động mặc định của form

            // Lấy giá trị từ các input
            var username = $('#username').val();
            var password = $('#password').val();

            // Kiểm tra nếu trường nào để trống
            if (!username || !password) {
                $('#errorMessage').text("Vui lòng nhập đầy đủ thông tin").show();
                return;
            }

            // Kiểm tra độ dài mật khẩu
            if (password.length < 6) {
                $('#errorMessage').text("Mật khẩu phải có ít nhất 6 ký tự").show();
                return;
            }

            // Kiểm tra độ dài tài khoản
            if (username.length < 6) {
                $('#errorMessage').text("Tài khoản phải có ít nhất 6 ký tự").show();
                return;
            }

            // Kiểm tra ký tự đặc biệt trong username và password
            if (hasSpecialCharacters(username)) {
                $('#errorMessage').text("Tên tài khoản không được chứa ký tự đặc biệt").show();
                return;
            }

            if (hasSpecialCharacters(password)) {
                $('#errorMessage').text("Mật khẩu không được chứa ký tự đặc biệt").show();
                return;
            }

            // Tạo đối tượng yêu cầu đăng nhập
            var loginRequest = {
                userName: username,
                passwordHash: password
            };

            // Gửi AJAX request
            $.ajax({
                type: "POST",
                url: "/Account/LoginAccount",
                data: JSON.stringify(loginRequest),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    if (response.success) {
                        // Đăng nhập thành công, chuyển hướng đến trang chính
                        window.location.href = '/Home';
                    } else {
                        // Hiển thị thông báo lỗi nếu tài khoản/mật khẩu không chính xác
                        $('#errorMessage').text(response.message).show(); // Hiển thị thông báo lỗi dưới form
                    }
                },
                error: function () {
                    // Hiển thị thông báo lỗi nếu có lỗi hệ thống
                    $('#errorMessage').text("Có lỗi xảy ra, vui lòng thử lại.").show();
                }
            });
        });

        // Hàm kiểm tra ký tự đặc biệt
        function hasSpecialCharacters(input) {
            var regex = /[^a-zA-Z0-9]/; // Kiểm tra ký tự ngoài chữ cái và số
            return regex.test(input);
        }

    </script>

}

<div class="page-header">
    <h1 style="font-weight: 400;">Mạng xã hội AFA</h1>
    <p style="font-size: 14px;">Kết nối với mọi người mọi nơi</p>
    <img src="~/images/LoginBanner.png" alt="" style="margin-top: 55px; color: white;">
</div>

<div class="container">
    <div class="row">
        <!-- Recent Login Section -->
        <div class="col-md-6">
            <div class="recent-login">
                <h4>Đăng Nhập Gần Đây</h4>
                <p>Lần sau khi đăng nhập, hãy nhấp vào ảnh của bạn. Để xóa một tài khoản khỏi trang này, hãy nhấp vào dấu chéo.</p>
                <div class="d-flex">
                    <div class="user-card">
                        <img src="~/images/resources/Duymai2.jpg" />
                        <p>Duy</p>
                    </div>
                    <div class="user-card">
                        <img src="~/images/resources/Duymai2.jpg" />
                        <p>Duy</p>
                    </div>
                    <div class="user-card">
                        <button type="button">+</button>
                        <p>Thêm Tài Khoản</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Form Section -->
        <div class="col-md-6">
            <div class="login-box">
                <h4><i class="fa-solid fa-right-to-bracket"></i> Đăng Nhập</h4>
                <p class="login-info">Đăng nhập lại, bạn vừa đăng xuất khỏi đây</p>

                <form class="form-login " id="loginForm">
                    <input type="text" id="username" placeholder="Tên Người Dùng" value="Adam James">
                    <span class="error-message" id="username-error"></span>

                    <input type="password" id="password" placeholder="Mật Khẩu" value="12345678">
                    <span class="error-message" id="password-error"></span>

                    <button name="login" type="submit">Đăng Nhập</button>
                    <a class="register" href="register.html">Đăng Ký</a>
                    <div id="errorMessage" style="color: red; margin-top: 10px; display: none;">Vui lòng điền đầy đủ thông tin.</div>
                </form>
            </div>
        </div>
    </div>

    <div class="row" style="font-weight: bold; margin-top: 60px;">
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="total">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Eo_circle_green_checkmark.svg/1200px-Eo_circle_green_checkmark.svg.png" alt="">
                <span>Người Dùng Đã Đăng Ký</span>
                <em>1,01,242</em>
            </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="total">
                <img src="https://cdn-icons-png.flaticon.com/512/10272/10272633.png" alt="">
                <span>Bài Đã Đăng</span>
                <em>21,01,242</em>
            </div>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4">
            <div class="total">
                <img src="https://cdn-icons-png.flaticon.com/256/6556/6556391.png" alt="">
                <span>Người Đang Trực Tuyến</span>
                <em>41,242</em>
            </div>
        </div>
    </div>
</div>