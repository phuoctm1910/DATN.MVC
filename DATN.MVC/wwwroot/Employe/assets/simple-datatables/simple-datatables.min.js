!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).simpleDatatables=t()}(function(){return function i(n,a,o){function r(e,t){if(!a[e]){if(!n[e]){var s="function"==typeof require&&require;if(!t&&s)return s(e,!0);if(l)return l(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}s=a[e]={exports:{}},n[e][0].call(s.exports,function(t){return r(n[e][1][t]||t)},s,s.exports,i,n,a,o)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<o.length;t++)r(o[t]);return r}({1:[function(t,e,zt){!function(t){!function(){"use strict";function r(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function P(t,e){let s=0,i=0;for(;s<t+1;)e[i].hidden||(s+=1),i+=1;return i-1}function R(t,e=300){let s;return()=>{clearTimeout(s),s=window.setTimeout(()=>t(),e)}}const l=t=>"[object Object]"===Object.prototype.toString.call(t),H=t=>{let e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!Array.isArray(e)&&!l(e))&&e},d=(t,e)=>{const s=document.createElement(t);if(e&&"object"==typeof e)for(const t in e)"html"===t?s.innerHTML=e[t]:s.setAttribute(t,e[t]);return s},c=t=>["#text","#comment"].includes(t.nodeName)?t.data:t.childNodes?t.childNodes.map(t=>c(t)).join(""):"",D=t=>{return null==t?"":t.hasOwnProperty("text")||t.hasOwnProperty("data")?(e=t).text??D(e.data):(t.hasOwnProperty("nodeName")?c:String)(t);var e},I=function(t){const e={};if(t)for(const s of t)e[s.name]=s.value;return e},h=t=>t?t.trim().split(" ").map(t=>"."+t).join(""):null,Y=(e,t)=>{return!t?.split(" ").some(t=>!e.classList.contains(t))},M=(t,e)=>t?e?t+" "+e:t:e||"";var j=function(){return(j=Object.assign||function(t){for(var e,s=arguments,i=1,n=arguments.length;i<n;i++)for(var a in e=s[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function q(t,e,s){if(s||2===arguments.length)for(var i,n=0,a=e.length;n<a;n++)!i&&n in e||((i=i||Array.prototype.slice.call(e,0,n))[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}F.prototype.toString=function(){return JSON.stringify(this)},F.prototype.setValue=function(t,e){return this[t]=e,this};var x=F;function F(t){void 0===t&&(t={});var s=this;Object.entries(t).forEach(function(t){var e=t[0],t=t[1];return s[e]=t})}function u(s){for(var t=arguments,e=[],i=1;i<arguments.length;i++)e[i-1]=t[i];return null!=s&&e.some(function(t){var e;return"function"==typeof(null==(e=null==(e=null==s?void 0:s.ownerDocument)?void 0:e.defaultView)?void 0:e[t])&&s instanceof s.ownerDocument.defaultView[t]})}function B(t,e,s){var i;return"#text"===t.nodeName?i=s.document.createTextNode(t.data):"#comment"===t.nodeName?i=s.document.createComment(t.data):(e?(i=s.document.createElementNS("http://www.w3.org/2000/svg",t.nodeName),"foreignObject"===t.nodeName&&(e=!1)):"svg"===t.nodeName.toLowerCase()?(i=s.document.createElementNS("http://www.w3.org/2000/svg","svg"),e=!0):i=s.document.createElement(t.nodeName),t.attributes&&Object.entries(t.attributes).forEach(function(t){var e=t[0],t=t[1];return i.setAttribute(e,t)}),t.childNodes&&t.childNodes.forEach(function(t){return i.appendChild(B(t,e,s))}),s.valueDiffing&&(t.value&&u(i,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(i.value=t.value),t.checked&&u(i,"HTMLInputElement")&&(i.checked=t.checked),t.selected&&u(i,"HTMLOptionElement")&&(i.selected=t.selected))),i}function z(t,e){for(e=e.slice();0<e.length;){var s=e.splice(0,1)[0];t=t.childNodes[s]}return t}function o(t,s,i){var n,a,e=s[i._const.action],o=s[i._const.route],r=([i._const.addElement,i._const.addTextElement].includes(e)||(n=z(t,o)),{diff:s,node:n});if(i.preDiffApply(r))return!0;switch(e){case i._const.addAttribute:if(!n||!u(n,"Element"))return!1;n.setAttribute(s[i._const.name],s[i._const.value]);break;case i._const.modifyAttribute:if(!n||!u(n,"Element"))return!1;n.setAttribute(s[i._const.name],s[i._const.newValue]),u(n,"HTMLInputElement")&&"value"===s[i._const.name]&&(n.value=s[i._const.newValue]);break;case i._const.removeAttribute:if(!n||!u(n,"Element"))return!1;n.removeAttribute(s[i._const.name]);break;case i._const.modifyTextElement:if(!n||!u(n,"Text"))return!1;i.textDiff(n,n.data,s[i._const.oldValue],s[i._const.newValue]),u(n.parentNode,"HTMLTextAreaElement")&&(n.parentNode.value=s[i._const.newValue]);break;case i._const.modifyValue:if(!n||void 0===n.value)return!1;n.value=s[i._const.newValue];break;case i._const.modifyComment:if(!n||!u(n,"Comment"))return!1;i.textDiff(n,n.data,s[i._const.oldValue],s[i._const.newValue]);break;case i._const.modifyChecked:if(!n||void 0===n.checked)return!1;n.checked=s[i._const.newValue];break;case i._const.modifySelected:if(!n||void 0===n.selected)return!1;n.selected=s[i._const.newValue];break;case i._const.replaceElement:var l="svg"===s[i._const.newValue].nodeName.toLowerCase()||"http://www.w3.org/2000/svg"===n.parentNode.namespaceURI;n.parentNode.replaceChild(B(s[i._const.newValue],l,i),n);break;case i._const.relocateGroup:q([],new Array(s[i._const.groupLength]),!0).map(function(){return n.removeChild(n.childNodes[s[i._const.from]])}).forEach(function(t,e){0===e&&(a=n.childNodes[s[i._const.to]]),n.insertBefore(t,a||null)});break;case i._const.removeElement:n.parentNode.removeChild(n);break;case i._const.addElement:var d=(c=o.slice()).splice(c.length-1,1)[0];if(!u(n=z(t,c),"Element"))return!1;n.insertBefore(B(s[i._const.element],"http://www.w3.org/2000/svg"===n.namespaceURI,i),n.childNodes[d]||null);break;case i._const.removeTextElement:if(!n||3!==n.nodeType)return!1;l=n.parentNode;l.removeChild(n),u(l,"HTMLTextAreaElement")&&(l.value="");break;case i._const.addTextElement:var c,d=(c=o.slice()).splice(c.length-1,1)[0],h=i.document.createTextNode(s[i._const.value]);if(!(n=z(t,c)).childNodes)return!1;n.insertBefore(h,n.childNodes[d]||null),u(n.parentNode,"HTMLTextAreaElement")&&(n.parentNode.value=s[i._const.value]);break;default:console.log("unknown action")}return i.postDiffApply({diff:r.diff,node:r.node,newNode:h}),!0}function U(t,e,s){var i=t[e];t[e]=t[s],t[s]=i}function J(n,t,a){(t=t.slice()).reverse(),t.forEach(function(t){var e=n,s=t,i=a;switch(s[i._const.action]){case i._const.addAttribute:s[i._const.action]=i._const.removeAttribute,o(e,s,i);break;case i._const.modifyAttribute:U(s,i._const.oldValue,i._const.newValue),o(e,s,i);break;case i._const.removeAttribute:s[i._const.action]=i._const.addAttribute,o(e,s,i);break;case i._const.modifyTextElement:case i._const.modifyValue:case i._const.modifyComment:case i._const.modifyChecked:case i._const.modifySelected:case i._const.replaceElement:U(s,i._const.oldValue,i._const.newValue),o(e,s,i);break;case i._const.relocateGroup:U(s,i._const.from,i._const.to),o(e,s,i);break;case i._const.removeElement:s[i._const.action]=i._const.addElement,o(e,s,i);break;case i._const.addElement:s[i._const.action]=i._const.removeElement,o(e,s,i);break;case i._const.removeTextElement:s[i._const.action]=i._const.addTextElement,o(e,s,i);break;case i._const.addTextElement:s[i._const.action]=i._const.removeTextElement,o(e,s,i);break;default:console.log("unknown action")}})}function W(t){return delete t.outerDone,delete t.innerDone,delete t.valueDone,!t.childNodes||t.childNodes.every(W)}function Q(e,s){if(!["nodeName","value","checked","selected","data"].every(function(t){return e[t]===s[t]}))return!1;if(Object.prototype.hasOwnProperty.call(e,"data"))return!0;if(Boolean(e.attributes)!==Boolean(s.attributes))return!1;if(Boolean(e.childNodes)!==Boolean(s.childNodes))return!1;if(e.attributes){var t=Object.keys(e.attributes),i=Object.keys(s.attributes);if(t.length!==i.length)return!1;if(!t.every(function(t){return e.attributes[t]===s.attributes[t]}))return!1}if(e.childNodes){if(e.childNodes.length!==s.childNodes.length)return!1;if(!e.childNodes.every(function(t,e){return Q(t,s.childNodes[e])}))return!1}return!0}function X(t,e){return q([],new Array(t),!0).map(function(){return e})}function Z(t,e){for(var s=t.childNodes||[],n=e.childNodes||[],a=X(s.length,!1),o=X(n.length,!1),r=[],l=function(){return arguments[1]},d=!1;!d;)!function(){var i=function(t,i,e,s){var n=0,a=[],o=t.length,r=i.length,l=q([],new Array(o+1),!0).map(function(){return[]}),d=tt(t,i),c=o===r;c&&t.some(function(t,e){var t=G(t),s=G(i[e]);return t.length!==s.length?!(c=!1):(t.some(function(t,e){if(t!==s[e])return!(c=!1)}),!c||void 0)});for(var h=0;h<o;h++)for(var u=t[h],p=0;p<r;p++){var f=i[p];e[h]||s[p]||!et(u,f,d,c)?l[h+1][p+1]=0:(l[h+1][p+1]=l[h][p]?l[h][p]+1:1,l[h+1][p+1]>=n&&(n=l[h+1][p+1],a=[h+1,p+1]))}return 0!==n&&{oldValue:a[0]-n,newValue:a[1]-n,length:n}}(s,n,a,o);i?(r.push(i),q([],new Array(i.length),!0).map(l).forEach(function(t){return e=o,t=t,a[(s=i).oldValue+t]=!0,void(e[s.newValue+t]=!0);var e,s})):d=!0}();return t.subsets=r,t.subsetsAge=100,r}var G=function(t){var e=[];return e.push(t.nodeName),"#text"!==t.nodeName&&"#comment"!==t.nodeName&&t.attributes&&(t.attributes.class&&e.push("".concat(t.nodeName,".").concat(t.attributes.class.replace(/ /g,"."))),t.attributes.id&&e.push("".concat(t.nodeName,"#").concat(t.attributes.id))),e},K=function(t){var s={},i={};return t.forEach(function(t){G(t).forEach(function(t){var e=t in s;e||t in i?e&&(delete s[t],i[t]=!0):s[t]=!0})}),s},tt=function(t,e){var t=K(t),s=K(e),i={};return Object.keys(t).forEach(function(t){s[t]&&(i[t]=!0)}),i},O=function(t){if(Object.prototype.hasOwnProperty.call(t,"data"))return{nodeName:"#text"===t.nodeName?"#text":"#comment",data:t.data};var e={nodeName:t.nodeName};return Object.prototype.hasOwnProperty.call(t,"attributes")&&(e.attributes=j({},t.attributes)),Object.prototype.hasOwnProperty.call(t,"checked")&&(e.checked=t.checked),Object.prototype.hasOwnProperty.call(t,"value")&&(e.value=t.value),Object.prototype.hasOwnProperty.call(t,"selected")&&(e.selected=t.selected),Object.prototype.hasOwnProperty.call(t,"childNodes")&&(e.childNodes=t.childNodes.map(function(t){return O(t)})),e},et=function(t,e,s,i,n){if(void 0===n&&(n=!1),!t||!e)return!1;if(t.nodeName!==e.nodeName)return!1;if(["#text","#comment"].includes(t.nodeName))return!!n||t.data===e.data;if(t.nodeName in s)return!0;if(t.attributes&&e.attributes){if(t.attributes.id){if(t.attributes.id!==e.attributes.id)return!1;if("".concat(t.nodeName,"#").concat(t.attributes.id)in s)return!0}if(t.attributes.class&&t.attributes.class===e.attributes.class&&"".concat(t.nodeName,".").concat(t.attributes.class.replace(/ /g,"."))in s)return!0}if(i)return!0;var s=t.childNodes?t.childNodes.slice().reverse():[],a=e.childNodes?e.childNodes.slice().reverse():[];if(s.length!==a.length)return!1;if(n)return s.every(function(t,e){return t.nodeName===a[e].nodeName});var o=tt(s,a);return s.every(function(t,e){return et(t,a[e],o,!0,!0)})},st=(it.prototype.add=function(t){var e;(e=this.list).push.apply(e,t)},it.prototype.forEach=function(e){this.list.forEach(function(t){return e(t)})},it);function it(){this.list=[]}function nt(t,e){var s,i,n=t;for(e=e.slice();0<e.length;)i=e.splice(0,1)[0],n=(s=n).childNodes?n.childNodes[i]:void 0;return{node:n,parentNode:s,nodeIndex:i}}function at(f,t,m){t.forEach(function(t){var e,s,i,n,a=f,o=t,r=m;[r._const.addElement,r._const.addTextElement].includes(o[r._const.action])||(c=nt(a,o[r._const.route]),s=c.node,i=c.parentNode,n=c.nodeIndex);var l,d=[],c={diff:o,node:s};if(!r.preVirtualDiffApply(c)){switch(o[r._const.action]){case r._const.addAttribute:s.attributes||(s.attributes={}),s.attributes[o[r._const.name]]=o[r._const.value],"checked"===o[r._const.name]?s.checked=!0:"selected"===o[r._const.name]?s.selected=!0:"INPUT"===s.nodeName&&"value"===o[r._const.name]&&(s.value=o[r._const.value]);break;case r._const.modifyAttribute:s.attributes[o[r._const.name]]=o[r._const.newValue];break;case r._const.removeAttribute:delete s.attributes[o[r._const.name]],0===Object.keys(s.attributes).length&&delete s.attributes,"checked"===o[r._const.name]?s.checked=!1:"selected"===o[r._const.name]?delete s.selected:"INPUT"===s.nodeName&&"value"===o[r._const.name]&&delete s.value;break;case r._const.modifyTextElement:s.data=o[r._const.newValue],"TEXTAREA"===i.nodeName&&(i.value=o[r._const.newValue]);break;case r._const.modifyValue:s.value=o[r._const.newValue];break;case r._const.modifyComment:s.data=o[r._const.newValue];break;case r._const.modifyChecked:s.checked=o[r._const.newValue];break;case r._const.modifySelected:s.selected=o[r._const.newValue];break;case r._const.replaceElement:p=O(o[r._const.newValue]),i.childNodes[n]=p;break;case r._const.relocateGroup:s.childNodes.splice(o[r._const.from],o[r._const.groupLength]).reverse().forEach(function(t){return s.childNodes.splice(o[r._const.to],0,t)}),s.subsets&&s.subsets.forEach(function(t){var e;o[r._const.from]<o[r._const.to]&&t.oldValue<=o[r._const.to]&&t.oldValue>o[r._const.from]?(t.oldValue-=o[r._const.groupLength],0<(e=t.oldValue+t.length-o[r._const.to])&&(d.push({oldValue:o[r._const.to]+o[r._const.groupLength],newValue:t.newValue+t.length-e,length:e}),t.length-=e)):o[r._const.from]>o[r._const.to]&&t.oldValue>o[r._const.to]&&t.oldValue<o[r._const.from]?(t.oldValue+=o[r._const.groupLength],0<(e=t.oldValue+t.length-o[r._const.to])&&(d.push({oldValue:o[r._const.to]+o[r._const.groupLength],newValue:t.newValue+t.length-e,length:e}),t.length-=e)):t.oldValue===o[r._const.from]&&(t.oldValue=o[r._const.to])});break;case r._const.removeElement:i.childNodes.splice(n,1),i.subsets&&i.subsets.forEach(function(t){t.oldValue>n?--t.oldValue:t.oldValue===n?t.delete=!0:t.oldValue<n&&t.oldValue+t.length>n&&(t.oldValue+t.length-1===n?t.length--:(d.push({newValue:t.newValue+n-t.oldValue,oldValue:n,length:t.length-n+t.oldValue-1}),t.length=n-t.oldValue))}),s=i;break;case r._const.addElement:var h=(l=o[r._const.route].slice()).splice(l.length-1,1)[0];s=null==(e=nt(a,l))?void 0:e.node,p=O(o[r._const.element]),s.childNodes||(s.childNodes=[]),h>=s.childNodes.length?s.childNodes.push(p):s.childNodes.splice(h,0,p),s.subsets&&s.subsets.forEach(function(t){var e;t.oldValue>=h?t.oldValue+=1:t.oldValue<h&&t.oldValue+t.length>h&&(e=t.oldValue+t.length-h,d.push({newValue:t.newValue+t.length-e,oldValue:h+1,length:e}),t.length-=e)});break;case r._const.removeTextElement:i.childNodes.splice(n,1),"TEXTAREA"===i.nodeName&&delete i.value,i.subsets&&i.subsets.forEach(function(t){t.oldValue>n?--t.oldValue:t.oldValue===n?t.delete=!0:t.oldValue<n&&t.oldValue+t.length>n&&(t.oldValue+t.length-1===n?t.length--:(d.push({newValue:t.newValue+n-t.oldValue,oldValue:n,length:t.length-n+t.oldValue-1}),t.length=n-t.oldValue))}),s=i;break;case r._const.addTextElement:var u=(l=o[r._const.route].slice()).splice(l.length-1,1)[0],p={nodeName:"#text",data:o[r._const.value]};(s=nt(a,l).node).childNodes||(s.childNodes=[]),u>=s.childNodes.length?s.childNodes.push(p):s.childNodes.splice(u,0,p),"TEXTAREA"===s.nodeName&&(s.value=o[r._const.newValue]),s.subsets&&s.subsets.forEach(function(t){var e;t.oldValue>=u&&(t.oldValue+=1),t.oldValue<u&&t.oldValue+t.length>u&&(e=t.oldValue+t.length-u,d.push({newValue:t.newValue+t.length-e,oldValue:u+1,length:e}),t.length-=e)});break;default:console.log("unknown action")}s.subsets&&(s.subsets=s.subsets.filter(function(t){return!t.delete&&t.oldValue!==t.newValue}),d.length&&(s.subsets=s.subsets.concat(d))),r.postVirtualDiffApply({node:c.node,diff:c.diff,newNode:p})}})}function p(t,e){void 0===e&&(e={valueDiffing:!0});var s={nodeName:t.nodeName};return u(t,"Text","Comment")?s.data=t.data:(t.attributes&&0<t.attributes.length&&(s.attributes={},Array.prototype.slice.call(t.attributes).forEach(function(t){return s.attributes[t.name]=t.value})),t.childNodes&&0<t.childNodes.length&&(s.childNodes=[],Array.prototype.slice.call(t.childNodes).forEach(function(t){return s.childNodes.push(p(t,e))})),e.valueDiffing&&(u(t,"HTMLTextAreaElement")&&(s.value=t.value),u(t,"HTMLInputElement")&&["radio","checkbox"].includes(t.type.toLowerCase())&&void 0!==t.checked?s.checked=t.checked:u(t,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(s.value=t.value),u(t,"HTMLOptionElement")&&(s.selected=t.selected))),s}var ot=/<\s*\/*[a-zA-Z:_][a-zA-Z0-9:_\-.]*\s*(?:"[^"]*"['"]*|'[^']*'['"]*|[^'"/>])*\/*\s*>|<!--(?:.|\n|\r)*?-->/g,rt=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function lt(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var dt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ct=function(t,e){var s={nodeName:"",attributes:{}},i=!1,n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(s.nodeName=e||"svg"===n[1]?n[1]:n[1].toUpperCase(),!dt[n[1]]&&"/"!==t.charAt(t.length-2)||(i=!0),s.nodeName.startsWith("!--")))return{type:"comment",node:{nodeName:"#comment",data:-1!==(e=t.indexOf("--\x3e"))?t.slice(4,e):""},voidElement:i};for(var a,o,r=new RegExp(rt),l=null,d=!1;!d;)null===(l=r.exec(t))?d=!0:l[0].trim()&&(l[1]?(o=[a=l[1].trim(),""],-1<a.indexOf("=")&&(o=a.split("=")),s.attributes[o[0]]=o[1],r.lastIndex--):l[2]&&(s.attributes[l[2]]=l[3].trim().substring(1,l[3].length-1)));return{type:"tag",node:s,voidElement:i}},N=function(r,l){void 0===l&&(l={valueDiffing:!0,caseSensitive:!1});var d,t,c=[],h=-1,u=[],p=!1;return 0!==r.indexOf("<")&&(t=r.indexOf("<"),c.push({nodeName:"#text",data:-1===t?r:r.substring(0,t)})),r.replace(ot,function(t,e){var s,i="/"!==t.charAt(1),n=t.startsWith("\x3c!--"),e=e+t.length,a=r.charAt(e);if(n){var n=ct(t,l.caseSensitive).node;if(h<0)return c.push(n),"";var o=u[h];return o&&n.nodeName&&(o.node.childNodes||(o.node.childNodes=[]),o.node.childNodes.push(n)),""}return i&&("svg"===(d=ct(t,l.caseSensitive||p)).node.nodeName&&(p=!0),h++,!d.voidElement&&a&&"<"!==a&&(d.node.childNodes||(d.node.childNodes=[]),s=lt(r.slice(e,r.indexOf("<",e))),d.node.childNodes.push({nodeName:"#text",data:s}),l.valueDiffing&&"TEXTAREA"===d.node.nodeName&&(d.node.value=s)),0===h&&d.node.nodeName&&c.push(d.node),(o=u[h-1])&&d.node.nodeName&&(o.node.childNodes||(o.node.childNodes=[]),o.node.childNodes.push(d.node)),u[h]=d),i&&!d.voidElement||(-1<h&&(d.voidElement||l.caseSensitive&&d.node.nodeName===t.slice(2,-1)||!l.caseSensitive&&d.node.nodeName.toUpperCase()===t.slice(2,-1).toUpperCase())&&-1<--h&&("svg"===d.node.nodeName&&(p=!1),d=u[h]),"<"===a||!a)||(n=-1===h?c:u[h].node.childNodes||[],o=r.indexOf("<",e),s=lt(r.slice(e,-1===o?void 0:o)),n.push({nodeName:"#text",data:s})),""}),c[0]},ht=(t.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},t.prototype.findDiffs=function(t,e){var s;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error("surpassed diffcap:".concat(JSON.stringify(this.t1Orig)," -> ").concat(JSON.stringify(this.t2Orig)))}while(0!==(s=this.findNextDiff(t,e,[])).length||Q(t,e)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,W(t),s=this.findNextDiff(t,e,[]))),0<s.length&&(this.foundAll=!1,this.tracker.add(s),at(t,s,this.options)),0<s.length);return this.tracker.list},t.prototype.findNextDiff=function(t,e,s){var i,n;if(this.options.maxDepth&&s.length>this.options.maxDepth)return[];if(!t.outerDone){if(i=this.findOuterDiff(t,e,s),0<(i=this.options.filterOuterDiff&&(n=this.options.filterOuterDiff(t,e,i))?n:i).length)return t.outerDone=!0,i;t.outerDone=!0}if(Object.prototype.hasOwnProperty.call(t,"data"))return[];if(!t.innerDone){if(0<(i=this.findInnerDiff(t,e,s)).length)return i;t.innerDone=!0}if(this.options.valueDiffing&&!t.valueDone){if(0<(i=this.findValueDiff(t,e,s)).length)return t.valueDone=!0,i;t.valueDone=!0}return[]},t.prototype.findOuterDiff=function(t,e,s){var i,n,a,o,r,l,d=[];if(t.nodeName!==e.nodeName){if(s.length)return[(new x).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,O(t)).setValue(this.options._const.newValue,O(e)).setValue(this.options._const.route,s)];throw new Error("Top level nodes have to be of the same kind.")}if(s.length&&this.options.diffcap<Math.abs((t.childNodes||[]).length-(e.childNodes||[]).length))return[(new x).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,O(t)).setValue(this.options._const.newValue,O(e)).setValue(this.options._const.route,s)];if(Object.prototype.hasOwnProperty.call(t,"data")&&t.data!==e.data)return"#text"===t.nodeName?[(new x).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)]:[(new x).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)];for(n=t.attributes?Object.keys(t.attributes).sort():[],a=e.attributes?Object.keys(e.attributes).sort():[],o=n.length,l=0;l<o;l++)i=n[l],-1===(r=a.indexOf(i))?d.push((new x).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,i).setValue(this.options._const.value,t.attributes[i])):(a.splice(r,1),t.attributes[i]!==e.attributes[i]&&d.push((new x).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,i).setValue(this.options._const.oldValue,t.attributes[i]).setValue(this.options._const.newValue,e.attributes[i])));for(o=a.length,l=0;l<o;l++)i=a[l],d.push((new x).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,i).setValue(this.options._const.value,e.attributes[i]));return d},t.prototype.findInnerDiff=function(t,e,s){var i=t.childNodes?t.childNodes.slice():[],n=e.childNodes?e.childNodes.slice():[],a=Math.max(i.length,n.length),o=Math.abs(i.length-n.length),r=[],l=0;if(!this.options.maxChildCount||a<this.options.maxChildCount){var d=Boolean(t.subsets&&t.subsetsAge--),c=d?t.subsets:t.childNodes&&e.childNodes?Z(t,e):[];if(0<c.length&&0<(r=this.attemptGroupRelocation(t,e,c,s,d)).length)return r}for(var h=0;h<a;h+=1){var u=i[h],p=n[h];o&&(u&&!p?("#text"===u.nodeName?r.push((new x).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(l)).setValue(this.options._const.value,u.data)):r.push((new x).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,s.concat(l)).setValue(this.options._const.element,O(u))),--l):p&&!u&&("#text"===p.nodeName?r.push((new x).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,s.concat(l)).setValue(this.options._const.value,p.data)):r.push((new x).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,s.concat(l)).setValue(this.options._const.element,O(p))))),u&&p&&(!this.options.maxChildCount||a<this.options.maxChildCount?r=r.concat(this.findNextDiff(u,p,s.concat(l))):Q(u,p)||(i.length>n.length?("#text"===u.nodeName?r.push((new x).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(l)).setValue(this.options._const.value,u.data)):r.push((new x).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,O(u)).setValue(this.options._const.route,s.concat(l))),i.splice(h,1),--h,--l,--o):i.length<n.length?(r=r.concat([(new x).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,O(p)).setValue(this.options._const.route,s.concat(l))]),i.splice(h,0,O(p)),--o):r=r.concat([(new x).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,O(u)).setValue(this.options._const.newValue,O(p)).setValue(this.options._const.route,s.concat(l))]))),l+=1}return t.innerDone=!0,r},t.prototype.attemptGroupRelocation=function(t,e,s,i,n){p=e,d=s,c=t.childNodes?X(t.childNodes.length,!0):[],h=p.childNodes?X(p.childNodes.length,!0):[],u=0,d.forEach(function(t){for(var e=t.oldValue+t.length,s=t.newValue+t.length,i=t.oldValue;i<e;i+=1)c[i]=u;for(i=t.newValue;i<s;i+=1)h[i]=u;u+=1});for(var a,o,r,l,d,c,h,u,p={gaps1:c,gaps2:h},f=p.gaps1,m=p.gaps2,g=t.childNodes.slice(),b=e.childNodes.slice(),v=Math.min(f.length,m.length),_=[],w=0,y=0;w<v;y+=1,w+=1)if(!n||!0!==f[w]&&!0!==m[w])if(!0===f[y])if("#text"===(r=g[y]).nodeName)if("#text"===b[w].nodeName){if(r.data!==b[w].data){for(var D=y;g.length>D+1&&"#text"===g[D+1].nodeName;)if(D+=1,b[w].data===g[D].data){l=!0;break}l||_.push((new x).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.oldValue,r.data).setValue(this.options._const.newValue,b[w].data))}}else _.push((new x).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.value,r.data)),f.splice(y,1),g.splice(y,1),v=Math.min(f.length,m.length),--y,--w;else!0===m[w]?_.push((new x).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,O(r)).setValue(this.options._const.newValue,O(b[w])).setValue(this.options._const.route,i.concat(y))):(_.push((new x).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.element,O(r))),f.splice(y,1),g.splice(y,1),v=Math.min(f.length,m.length),--y,--w);else if(!0===m[w])v=("#text"===(r=b[w]).nodeName?(_.push((new x).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.value,r.data)),f.splice(y,0,!0),g.splice(y,0,{nodeName:"#text",data:r.data})):(_.push((new x).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,i.concat(y)).setValue(this.options._const.element,O(r))),f.splice(y,0,!0),g.splice(y,0,O(r))),Math.min(f.length,m.length));else if(f[y]!==m[w]){if(0<_.length)return _;if(o=s[f[y]],(a=Math.min(o.newValue,g.length-o.length))!==o.oldValue){for(var M=!1,N=0;N<o.length;N+=1)et(g[a+N],g[o.oldValue+N],{},!1,!0)||(M=!0);if(M)return[(new x).setValue(this.options._const.action,this.options._const.relocateGroup).setValue(this.options._const.groupLength,o.length).setValue(this.options._const.from,o.oldValue).setValue(this.options._const.to,a).setValue(this.options._const.route,i)]}}return _},t.prototype.findValueDiff=function(t,e,s){var i=[];return t.selected!==e.selected&&i.push((new x).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,t.selected).setValue(this.options._const.newValue,e.selected).setValue(this.options._const.route,s)),(t.value||e.value)&&t.value!==e.value&&"OPTION"!==t.nodeName&&i.push((new x).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,t.value||"").setValue(this.options._const.newValue,e.value||"").setValue(this.options._const.route,s)),t.checked!==e.checked&&i.push((new x).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,t.checked).setValue(this.options._const.newValue,e.checked).setValue(this.options._const.route,s)),i},t),ut={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(t,e,s,i){t.data=i},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!("undefined"==typeof window||!window.document)&&window.document,components:[]},pt=(ft.prototype.apply=function(t,e){return s=t,i=this.options,e.every(function(t){return o(s,t,i)});var s,i},ft.prototype.undo=function(t,e){return J(t,e,this.options)},ft.prototype.diff=function(t,e){return new ht(t,e,this.options).init()},ft);function ft(s){var t,i;void 0===s&&(s={}),Object.entries(ut).forEach(function(t){var e=t[0],t=t[1];Object.prototype.hasOwnProperty.call(s,e)||(s[e]=t)}),s._const||(t=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","groupLength","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"],i={},s.compress?t.forEach(function(t,e){return i[t]=e}):t.forEach(function(t){return i[t]=t}),s._const=i),this.options=s}function t(t,e,s){this.options=s,this.t1="undefined"!=typeof Element&&u(t,"Element")?p(t,this.options):"string"==typeof t?N(t,this.options):JSON.parse(JSON.stringify(t)),this.t2="undefined"!=typeof Element&&u(e,"Element")?p(e,this.options):"string"==typeof e?N(e,this.options):JSON.parse(JSON.stringify(e)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig="undefined"!=typeof Element&&u(t,"Element")?p(t,this.options):"string"==typeof t?N(t,this.options):JSON.parse(JSON.stringify(t)),this.t2Orig="undefined"!=typeof Element&&u(e,"Element")?p(e,this.options):"string"==typeof e?N(e,this.options):JSON.parse(JSON.stringify(e))),this.tracker=new st}const mt=(t,n,a,{classes:o,format:r,hiddenHeader:l,sortable:d,scrollY:c,type:h},{noColumnWidths:u,unhideHeader:p})=>({nodeName:"TR",childNodes:t.map((t,e)=>{var s=n[e]||{type:h,format:r,sortable:!0,searchable:!0};if(!s.hidden){const i=t.attributes?{...t.attributes}:{};if(s.sortable&&d&&(!c.length||p)&&(s.filter?i["data-filterable"]="true":i["data-sortable"]="true"),s.headerClass&&(i.class=M(i.class,s.headerClass)),a.sort&&a.sort.column===e){const t="asc"===a.sort.dir?o.ascending:o.descending;i.class=M(i.class,t),i["aria-sort"]="asc"===a.sort.dir?"ascending":"descending"}else a.filters[e]&&(i.class=M(i.class,o.filterActive));if(a.widths[e]&&!u){const t=`width: ${a.widths[e]}%;`;i.style=M(i.style,t)}if(c.length&&!p){const t="padding-bottom: 0;padding-top: 0;border: 0;";i.style=M(i.style,"padding-bottom: 0;padding-top: 0;border: 0;")}e="html"===t.type?t.data:[{nodeName:"#text",data:t.text??String(t.data)}];return{nodeName:"TH",attributes:i,childNodes:!l&&!c.length||p?s.sortable&&d?[{nodeName:"BUTTON",attributes:{class:s.filter?o.filter:o.sorter},childNodes:e}]:e:[{nodeName:"#text",data:""}]}}}).filter(t=>t)}),gt=(t,e,s,a,o,i,{classes:r,hiddenHeader:n,header:l,footer:d,format:c,sortable:h,scrollY:u,type:p,rowRender:f,tabIndex:m},{noColumnWidths:g,unhideHeader:b,renderHeader:v},_,w)=>{const y={nodeName:"TABLE",attributes:{...t},childNodes:[{nodeName:"TBODY",childNodes:s.map(({row:t,index:n})=>{const e={nodeName:"TR",attributes:{...t.attributes,"data-index":String(n)},childNodes:t.cells.map((t,e)=>{const s=a[e]||{type:p,format:c,sortable:!0,searchable:!0};if(!s.hidden){const i={nodeName:"TD",attributes:t.attributes?{...t.attributes}:{},childNodes:"html"===s.type?t.data:[{nodeName:"#text",data:D(t)}]};if(l||d||!o.widths[e]||g||(i.attributes.style=M(i.attributes.style,`width: ${o.widths[e]}%;`)),s.cellClass&&(i.attributes.class=M(i.attributes.class,s.cellClass)),s.render){const a=s.render(t.data,i,n,e);if(a){if("string"!=typeof a)return a;{const t=N(`<td>${a}</td>`);1===t.childNodes.length&&["#text","#comment"].includes(t.childNodes[0].nodeName)?i.childNodes[0].data=a:i.childNodes=t.childNodes}}}return i}}).filter(t=>t)};if(n===i&&(e.attributes.class=M(e.attributes.class,r.cursor)),f){const a=f(t,e,n);if(a){if("string"!=typeof a)return a;{const t=N(`<tr>${a}</tr>`);!t.childNodes||1===t.childNodes.length&&["#text","#comment"].includes(t.childNodes[0].nodeName)?e.childNodes[0].data=a:e.childNodes=t.childNodes}}}return e})}]};if(y.attributes.class=M(y.attributes.class,r.table),l||d||v){const t=mt(e,a,o,{classes:r,hiddenHeader:n,sortable:h,scrollY:u},{noColumnWidths:g,unhideHeader:b});if(l||v){const e={nodeName:"THEAD",childNodes:[t]};!u.length&&!n||b||(e.attributes={style:"height: 0px;"}),y.childNodes.unshift(e)}if(d){const e={nodeName:"TFOOT",childNodes:[l?structuredClone(t):t]};!u.length&&!n||b||(e.attributes={style:"height: 0px;"}),y.childNodes.push(e)}}return _.forEach(t=>y.childNodes.push(t)),w.forEach(t=>y.childNodes.push(t)),!1!==m&&(y.attributes.tabindex=String(m)),y};function bt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vt,_t,f,wt,e,yt,Dt,m,g,b,v,_,w,Mt,y,E,Nt,xt,Ot,s,a,V,Et,C,Vt,Ct,i=bt({exports:{}}.exports=(Dt="millisecond",m="second",g="minute",b="hour",v="day",_="week",w="month",Mt="quarter",y="year",E="date",Nt="Invalid Date",xt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ot=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,s={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],s=t%100;return"["+t+(e[(s-20)%10]||e[s]||e[0])+"]"}},n={s:Tt,z:function(t){var t=-t.utcOffset(),e=Math.abs(t),s=Math.floor(e/60),e=e%60;return(t<=0?"+":"-")+Tt(s,2,"0")+":"+Tt(e,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var i=12*(s.year()-e.year())+(s.month()-e.month()),n=e.clone().add(i,w),a=s-n<0,e=e.clone().add(i+(a?-1:1),w);return+(-(i+(s-n)/(a?n-e:e-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:w,y:y,w:_,d:v,D:E,h:b,m:g,s:m,ms:Dt,Q:Mt}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},(V={})[a="en"]=s,Et="$isDayjsObject",(C=n).l=k,C.i=At,C.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},(s=Lt.prototype).parse=function(a){this.$d=function(){var t=a.date,e=a.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s,i,n=t.match(xt);if(n)return s=n[2]-1||0,i=(n[7]||"0").substring(0,3),e?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}return new Date(t)}(),this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return C},s.isValid=function(){return!(this.$d.toString()===Nt)},s.isSame=function(t,e){t=S(t);return this.startOf(e)<=t&&t<=this.endOf(e)},s.isAfter=function(t,e){return S(t)<this.startOf(e)},s.isBefore=function(t,e){return this.endOf(e)<S(t)},s.$g=function(t,e,s){return C.u(t)?this[e]:this.set(s,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,e){function s(t,e){return e=C.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n),a?e:e.endOf(v)}function i(t,e){return C.w(n.toDate()[t].apply(n.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(e)),n)}var n=this,a=!!C.u(e)||e,e=C.p(t),o=this.$W,r=this.$M,l=this.$D,d="set"+(this.$u?"UTC":"");switch(e){case y:return a?s(1,0):s(31,11);case w:return a?s(1,r):s(0,r+1);case _:var c=this.$locale().weekStart||0,c=(o<c?o+7:o)-c;return s(a?l-c:l+(6-c),r);case v:case E:return i(d+"Hours",0);case b:return i(d+"Minutes",1);case g:return i(d+"Seconds",2);case m:return i(d+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,e){var t=C.p(t),s="set"+(this.$u?"UTC":""),s=((i={}).day=s+"Date",i[E]=s+"Date",i[w]=s+"Month",i[y]=s+"FullYear",i[b]=s+"Hours",i[g]=s+"Minutes",i[m]=s+"Seconds",i[Dt]=s+"Milliseconds",i[t]),i=t===v?this.$D+(e-this.$W):e;return t===w||t===y?((e=this.clone().set(E,1)).$d[s](i),e.init(),this.$d=e.set(E,Math.min(this.$D,e.daysInMonth())).$d):s&&this.$d[s](i),this.init(),this},s.set=function(t,e){return this.clone().$set(t,e)},s.get=function(t){return this[C.p(t)]()},s.add=function(s,t){function e(t){var e=S(i);return C.w(e.date(e.date()+Math.round(t*s)),i)}var i=this,t=(s=Number(s),C.p(t));if(t===w)return this.set(w,this.$M+s);if(t===y)return this.set(y,this.$y+s);if(t===v)return e(1);if(t===_)return e(7);(n={})[g]=6e4,n[b]=36e5,n[m]=1e3;var n=n[t]||1,t=this.$d.getTime()+s*n;return C.w(t,this)},s.subtract=function(t,e){return this.add(-1*t,e)},s.format=function(t){var n=this,s=this.$locale();if(!this.isValid())return s.invalidDate||Nt;function i(t,e,s,i){return t&&(t[e]||t(n,o))||s[e].slice(0,i)}function a(t){return C.s(l%12||12,t,"0")}var o=t||"YYYY-MM-DDTHH:mm:ssZ",r=C.z(this),l=this.$H,d=this.$m,c=this.$M,h=s.weekdays,u=s.months,t=s.meridiem,p=t||function(t,e,s){t=t<12?"AM":"PM";return s?t.toLowerCase():t};return o.replace(Ot,function(t,e){return e||function(){switch(t){case"YY":return String(n.$y).slice(-2);case"YYYY":return C.s(n.$y,4,"0");case"M":return c+1;case"MM":return C.s(c+1,2,"0");case"MMM":return i(s.monthsShort,c,u,3);case"MMMM":return i(u,c);case"D":return n.$D;case"DD":return C.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return i(s.weekdaysMin,n.$W,h,2);case"ddd":return i(s.weekdaysShort,n.$W,h,3);case"dddd":return h[n.$W];case"H":return String(l);case"HH":return C.s(l,2,"0");case"h":return a(1);case"hh":return a(2);case"a":return p(l,d,!0);case"A":return p(l,d,!1);case"m":return String(d);case"mm":return C.s(d,2,"0");case"s":return String(n.$s);case"ss":return C.s(n.$s,2,"0");case"SSS":return C.s(n.$ms,3,"0");case"Z":return r}return null}()||r.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,e,s){function i(){return C.m(a,o)}var n,a=this,e=C.p(e),o=S(t),r=6e4*(o.utcOffset()-this.utcOffset()),l=this-o;switch(e){case y:n=i()/12;break;case w:n=i();break;case Mt:n=i()/3;break;case _:n=(l-r)/6048e5;break;case v:n=(l-r)/864e5;break;case b:n=l/36e5;break;case g:n=l/6e4;break;case m:n=l/1e3;break;default:n=l}return s?n:C.a(n)},s.daysInMonth=function(){return this.endOf(w).$D},s.$locale=function(){return V[this.$L]},s.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),t=k(t,e,!0);return t&&(s.$L=t),s},s.clone=function(){return C.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},Ct=(Vt=Lt).prototype,S.prototype=Ct,[["$ms",Dt],["$s",m],["$m",g],["$H",b],["$W",v],["$M",w],["$y",y],["$D",E]].forEach(function(e){Ct[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),S.extend=function(t,e){return t.$i||(t(e,Vt,S),t.$i=!0),S},S.locale=k,S.isDayjs=At,S.unix=function(t){return S(1e3*t)},S.en=V[a],S.Ls=V,S.p={},S)),n=bt({exports:{}}.exports=(vt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},_t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,f={},wt=function(t){return(t=+t)+(68<t?1900:2e3)},yt={A:[n=/\d*[^-_:/,()\s\d]+/,function(t){this.afternoon=kt(t,!1)}],a:[n,function(t){this.afternoon=kt(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[s=/\d\d/,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[e=/\d\d?/,$("seconds")],ss:[e,$("seconds")],m:[e,$("minutes")],mm:[e,$("minutes")],H:[e,$("hours")],h:[e,$("hours")],HH:[e,$("hours")],hh:[e,$("hours")],D:[e,$("day")],DD:[s,$("day")],Do:[n,function(t){var e=f.ordinal,s=t.match(/\d+/);if(this.day=s[0],e)for(var i=1;i<=31;i+=1)e(i).replace(/\[|\]/g,"")===t&&(this.day=i)}],M:[e,$("month")],MM:[s,$("month")],MMM:[n,function(t){var e=$t("months"),e=($t("monthsShort")||e.map(function(t){return t.slice(0,3)})).indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],MMMM:[n,function(t){t=$t("months").indexOf(t)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,$("year")],YY:[s,function(t){this.year=wt(t)}],YYYY:[/\d{4}/,$("year")],Z:e=[/[+-]\d\d:?(\d\d)?|Z/,function(s){(this.zone||(this.zone={})).offset=function(){if(!s)return 0;if("Z"===s)return 0;var t=s.match(/([+-]|\d\d)/g),e=60*t[1]+(+t[2]||0);return 0===e?0:"+"===t[0]?-e:e}()}],ZZ:e},function(t,e,u){u.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(wt=t.parseTwoDigitYear);var t=e.prototype,p=t.parse;t.parse=function(t){var e=t.date,s=t.utc,i=t.args,n=(this.$u=s,i[1]);if("string"==typeof n){var a=!0===i[2],o=!0===i[3],r=a||o,l=i[2];o&&(l=i[2]),f=this.$locale(),!a&&l&&(f=u.Ls[l]),this.$d=function(t,e,s){try{if(-1<["x","X"].indexOf(e))return new Date(("X"===e?1e3:1)*t);var i=St(e)(t),n=i.year,a=i.month,o=i.day,r=i.hours,l=i.minutes,d=i.seconds,c=i.milliseconds,h=i.zone,u=new Date,p=o||(n||a?1:u.getDate()),f=n||u.getFullYear(),m=0,g=(n&&!a||(m=0<a?a-1:u.getMonth()),r||0),b=l||0,v=d||0,_=c||0;return h?new Date(Date.UTC(f,m,p,g,b,v,_+60*h.offset*1e3)):s?new Date(Date.UTC(f,m,p,g,b,v,_)):new Date(f,m,p,g,b,v,_)}catch(t){return new Date("")}}(e,n,s),this.init(),l&&!0!==l&&(this.$L=this.locale(l).$L),r&&e!=this.format(n)&&(this.$d=new Date("")),f={}}else if(n instanceof Array)for(var d=n.length,c=1;c<=d;c+=1){i[1]=n[c-1];var h=u.apply(this,i);if(h.isValid()){this.$d=h.$d,this.$L=h.$L,this.init();break}c===d&&(this.$d=new Date(""))}else p.call(this,t)}}));function $(e){return function(t){this[e]=+t}}function $t(t){return(t=f[t])&&(t.indexOf?t:t.s.concat(t.f))}function kt(t,e){var s,i=f.meridiem;if(i){for(var n=1;n<=24;n+=1)if(-1<t.indexOf(i(n,0,e))){s=12<n;break}}else s=t===(e?"pm":"PM");return s}function St(t){for(var e=t,n=f&&f.formats,c=(t=e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,e,s){var i=s&&s.toUpperCase();return e||n[s]||vt[s]||n[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(t,e,s){return e||s.slice(1)})})).match(_t),h=c.length,s=0;s<h;s+=1){var i=c[s],a=yt[i],o=a&&a[0],a=a&&a[1];c[s]=a?{regex:o,parser:a}:i.replace(/^\[|\]$/g,"")}return function(t){for(var e,s,i,n={},a=0,o=0;a<h;a+=1){var r,l,d=c[a];"string"==typeof d?o+=d.length:(l=d.regex,d=d.parser,r=t.slice(o),l=l.exec(r)[0],d.call(n,l),t=t.replace(l,""))}return void 0!==(i=(e=n).afternoon)&&(s=e.hours,i?s<12&&(e.hours+=12):12===s&&(e.hours=0),delete e.afternoon),n}}function Tt(t,e,s){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(s)+t}function At(t){return t instanceof Vt||!(!t||!t[Et])}function k(t,e,s){var i;if(!t)return a;if("string"==typeof t){var n=t.toLowerCase(),e=(V[n]&&(i=n),e&&(V[n]=e,i=n),t.split("-"));if(!i&&1<e.length)return k(e[0])}else{n=t.name;V[n]=t,i=n}return!s&&i&&(a=i),i||!s&&a}function S(t,e){return At(t)?t.clone():((e="object"==typeof e?e:{}).date=t,e.args=arguments,new Vt(e))}function Lt(t){this.$L=k(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[Et]=!0}i.extend(n);const Pt=(t,e)=>{let s;if(e)switch(e){case"ISO_8601":s=t;break;case"RFC_2822":s=i(t.slice(5),"DD MMM YYYY HH:mm:ss ZZ").unix();break;case"MYSQL":s=i(t,"YYYY-MM-DD hh:mm:ss").unix();break;case"UNIX":s=i(t).unix();break;default:s=i(t,e,!0).valueOf()}return s},T=(t,e)=>{if(t?.constructor===Object&&Object.prototype.hasOwnProperty.call(t,"data")&&!Object.keys(t).find(t=>!["text","order","data","attributes"].includes(t)))return t;const s={data:t};switch(e.type){case"string":"string"!=typeof t&&(s.text=String(s.data),s.order=s.text);break;case"date":e.format&&(s.order=Pt(String(s.data),e.format));break;case"number":s.text=String(s.data),s.data=parseFloat(s.data),s.order=s.data;break;case"html":{const t=Array.isArray(s.data)?{nodeName:"TD",childNodes:s.data}:N(`<td>${String(s.data)}</td>`),e=(s.data=t.childNodes||[],c(t));s.text=e,s.order=e;break}case"boolean":"string"==typeof s.data&&(s.data=s.data.toLowerCase().trim()),s.data=!["false",!1,null,void 0,0].includes(s.data),s.order=s.data?1:0,s.text=String(s.data);break;case"other":s.text="",s.order=0;break;default:s.text=JSON.stringify(s.data)}return s},A=t=>{if(t instanceof Object&&t.constructor===Object&&t.hasOwnProperty("data")&&("string"==typeof t.text||"string"==typeof t.data))return t;const e={data:t};if("string"==typeof t){if(t.length){var s=N(`<th>${t}</th>`);if(s.childNodes&&(1!==s.childNodes.length||"#text"!==s.childNodes[0].nodeName)){e.data=s.childNodes,e.type="html";const t=c(s);e.text=t}}}else[null,void 0].includes(t)?e.text="":e.text=JSON.stringify(t);return e},Rt=(t,i=void 0,n,a,o)=>{const e={data:[],headings:[]};if(t.headings)e.headings=t.headings.map(t=>A(t));else if(i?.tHead)e.headings=Array.from(i.tHead.querySelectorAll("th")).map((t,e)=>{var s=(t=>{var e=p(t,{valueDiffing:!1});let s;return(s=!e.childNodes||1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName?{data:t.innerText,type:"string"}:{data:e.childNodes,type:"html",text:c(e)}).attributes=e.attributes,s})(t);n[e]||(n[e]={type:a,format:o,searchable:!0,sortable:!0});const i=n[e];return"false"!==t.dataset.sortable?.trim().toLowerCase()&&"false"!==t.dataset.sort?.trim().toLowerCase()||(i.sortable=!1),"false"===t.dataset.searchable?.trim().toLowerCase()&&(i.searchable=!1),"true"!==t.dataset.hidden?.trim().toLowerCase()&&"true"!==t.getAttribute("hidden")?.trim().toLowerCase()||(i.hidden=!0),["number","string","html","date","boolean","other"].includes(t.dataset.type)&&(i.type=t.dataset.type,"date"===i.type&&t.dataset.format&&(i.format=t.dataset.format)),s});else if(t.data?.length){const i=t.data[0],n=Array.isArray(i)?i:i.cells;e.headings=n.map(t=>A(""))}else i?.tBodies.length&&(e.headings=Array.from(i.tBodies[0].rows[0].cells).map(t=>A("")));for(let t=0;t<e.headings.length;t++)n[t]||(n[t]={type:a,format:o,sortable:!0,searchable:!0});if(t.data){const i=e.headings.map(t=>t.data?String(t.data):t.text);e.data=t.data.map(t=>{let e,s;return Array.isArray(t)?(e={},s=t):t.hasOwnProperty("cells")&&Object.keys(t).every(t=>["cells","attributes"].includes(t))?(e=t.attributes,s=t.cells):(e={},s=[],Object.entries(t).forEach(([t,e])=>{t=i.indexOf(t);-1<t&&(s[t]=e)})),{attributes:e,cells:s.map((t,e)=>T(t,n[e]))}})}else i?.tBodies?.length&&(e.data=Array.from(i.tBodies[0].rows).map(t=>({attributes:I(t.attributes),cells:Array.from(t.cells).map((t,e)=>{const s=t.dataset.content?T(t.dataset.content,n[e]):((t,e)=>{let s;switch(e.type){case"string":s={data:t.innerText};break;case"date":var i=t.innerText;s={data:i,order:Pt(i,e.format)};break;case"number":{const e=parseFloat(t.innerText);s={data:e,order:e,text:t.innerText};break}case"boolean":{const e=!["false","0","null","undefined"].includes(t.innerText.toLowerCase().trim());s={data:e,text:e?"1":"0",order:e?1:0};break}default:s={data:p(t,{valueDiffing:!1}).childNodes||[],text:t.innerText,order:t.innerText}}return s.attributes=I(t.attributes),s})(t,n[e]);return t.dataset.order&&(s.order=isNaN(parseFloat(t.dataset.order))?t.dataset.order:parseFloat(t.dataset.order)),s})})));if(e.data.length&&e.data[0].cells.length!==e.headings.length)throw new Error("Data heading length mismatch.");return e};class Ht{cursor;dt;constructor(t){this.dt=t,this.cursor=!1}setCursor(t=!1){if(t!==this.cursor){const e=this.cursor;if(this.cursor=t,this.dt._renderTable(),!1!==t&&this.dt.options.scrollY){const t=h(this.dt.options.classes.cursor),e=this.dt.dom.querySelector("tr"+t);e&&e.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,e)}}add(t){!Array.isArray(t)||t.length<1||(t={cells:t.map((t,e)=>{e=this.dt.columns.settings[e];return T(t,e)})},this.dt.data.data.push(t),this.dt.hasRows=!0,this.dt.update(!0))}remove(s){if(!Array.isArray(s))return this.remove([s]);this.dt.data.data=this.dt.data.data.filter((t,e)=>!s.includes(e)),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.update(!0)}findRowIndex(e,s){return this.dt.data.data.findIndex(t=>{t=t.cells[e];return D(t).toLowerCase().includes(String(s).toLowerCase())})}findRow(t,e){t=this.findRowIndex(t,e);if(t<0)return{index:-1,row:null,cols:[]};const s=this.dt.data.data[t],i=s.cells.map(t=>t.data);return{index:t,row:s,cols:i}}updateRow(t,e){e={cells:e.map((t,e)=>{e=this.dt.columns.settings[e];return T(t,e)})};this.dt.data.data.splice(t,1,e),this.dt.update(!0)}}class It{dt;settings;_state;constructor(t){this.dt=t,this.init()}init(){[this.settings,this._state]=((t=[],i,n)=>{let a=[],o=!1;const r=[];return t.forEach(s=>{(Array.isArray(s.select)?s.select:[s.select]).forEach(t=>{a[t]?s.type&&(a[t].type=s.type):a[t]={type:s.type||i,sortable:!0,searchable:!0};const e=a[t];s.render&&(e.render=s.render),s.format?e.format=s.format:"date"===s.type&&(e.format=n),s.cellClass&&(e.cellClass=s.cellClass),s.headerClass&&(e.headerClass=s.headerClass),s.locale&&(e.locale=s.locale),!1===s.sortable?e.sortable=!1:(s.numeric&&(e.numeric=s.numeric),s.caseFirst&&(e.caseFirst=s.caseFirst)),!1===s.searchable?e.searchable=!1:s.sensitivity&&(e.sensitivity=s.sensitivity),(e.searchable||e.sortable)&&void 0!==s.ignorePunctuation&&(e.ignorePunctuation=s.ignorePunctuation),s.searchMethod&&(e.searchMethod=s.searchMethod),s.hidden&&(e.hidden=!0),s.filter&&(e.filter=s.filter),s.sortSequence&&(e.sortSequence=s.sortSequence),s.sort&&(s.filter?r[t]=s.sort:o={column:t,dir:s.sort}),void 0!==s.searchItemSeparator&&(e.searchItemSeparator=s.searchItemSeparator)})}),[a=a.map(t=>t||{type:i,format:"date"===i?n:void 0,sortable:!0,searchable:!0}),{filters:r,sort:o,widths:[]}]})(this.dt.options.columns,this.dt.options.type,this.dt.options.format)}get(t){return t<0||t>=this.size()?null:{...this.settings[t]}}size(){return this.settings.length}swap(t){if(2===t.length){const e=this.dt.data.headings.map((t,e)=>e),s=t[0],i=t[1],n=e[i];return e[i]=e[s],e[s]=n,this.order(e)}}order(t){this.dt.data.headings=t.map(t=>this.dt.data.headings[t]),this.dt.data.data.forEach(e=>e.cells=t.map(t=>e.cells[t])),this.settings=t.map(t=>this.settings[t]),this.dt.update()}hide(t){(t=Array.isArray(t)?t:[t]).length&&(t.forEach(t=>{this.settings[t]||(this.settings[t]={type:"string"}),this.settings[t].hidden=!0}),this.dt.update())}show(t){(t=Array.isArray(t)?t:[t]).length&&(t.forEach(t=>{this.settings[t]||(this.settings[t]={type:"string",sortable:!0}),delete this.settings[t].hidden}),this.dt.update())}visible(t){return void 0===t&&(t=[...Array(this.dt.data.headings.length).keys()]),Array.isArray(t)?t.map(t=>!this.settings[t]?.hidden):!this.settings[t]?.hidden}add(s){var t=this.dt.data.headings.length;if(this.dt.data.headings=this.dt.data.headings.concat([A(s.heading)]),this.dt.data.data.forEach((t,e)=>{t.cells=t.cells.concat([T(s.data[e],s)])}),this.settings[t]={type:s.type||"string",sortable:!0,searchable:!0},s.type||s.format||s.sortable||s.render||s.filter){const e=this.settings[t];s.render&&(e.render=s.render),s.format&&(e.format=s.format),s.cellClass&&(e.cellClass=s.cellClass),s.headerClass&&(e.headerClass=s.headerClass),s.locale&&(e.locale=s.locale),!1===s.sortable?e.sortable=!1:(s.numeric&&(e.numeric=s.numeric),s.caseFirst&&(e.caseFirst=s.caseFirst)),!1===s.searchable?e.searchable=!1:s.sensitivity&&(e.sensitivity=s.sensitivity),(e.searchable||e.sortable)&&s.ignorePunctuation&&(e.ignorePunctuation=s.ignorePunctuation),s.hidden&&(e.hidden=!0),s.filter&&(e.filter=s.filter),s.sortSequence&&(e.sortSequence=s.sortSequence)}this.dt.update(!0)}remove(s){Array.isArray(s)||(s=[s]),this.dt.data.headings=this.dt.data.headings.filter((t,e)=>!s.includes(e)),this.dt.data.data.forEach(t=>t.cells=t.cells.filter((t,e)=>!s.includes(e))),this.dt.update(!0)}filter(s,e=!1){if(this.settings[s]?.filter?.length){const i=this._state.filters[s];let t;if(i){let e=!1;t=this.settings[s].filter.find(t=>!!e||(t===i&&(e=!0),!1))}else{const e=this.settings[s].filter;t=e?e[0]:void 0}t?this._state.filters[s]=t:i&&(this._state.filters[s]=void 0),this.dt._currentPage=1,this.dt.update(),e||this.dt.emit("datatable.filter",s,t)}}sort(n,a=void 0,t=!1){var e=this.settings[n];if(t||this.dt.emit("datatable.sorting",n,a),!a){const t=!(!this._state.sort||this._state.sort.column!==n)&&this._state.sort?.dir,D=e?.sortSequence||["asc","desc"];if(t){const n=D.indexOf(t);a=-1===n?D[0]||"asc":n===D.length-1?D[0]:D[n+1]}else a=D.length?D[0]:"asc"}const o=!!["string","html"].includes(e.type)&&new Intl.Collator(e.locale||this.dt.options.locale,{usage:"sort",numeric:e.numeric||this.dt.options.numeric,caseFirst:e.caseFirst||this.dt.options.caseFirst,ignorePunctuation:e.ignorePunctuation||this.dt.options.ignorePunctuation});this.dt.data.data.sort((t,e)=>{t=t.cells[n],e=e.cells[n];let s=t.order??D(t),i=e.order??D(e);if("desc"===a){const n=s;s=i,i=n}return o&&"number"!=typeof s&&"number"!=typeof i?o.compare(String(s),String(i)):s<i?-1:s>i?1:0}),this._state.sort={column:n,dir:a},this.dt._searchQueries.length?(this.dt.multiSearch(this.dt._searchQueries),this.dt.emit("datatable.sort",n,a)):t||(this.dt._currentPage=1,this.dt.update(),this.dt.emit("datatable.sort",n,a))}_measureWidths(){const t=this.dt.data.headings.filter((t,e)=>!this.settings[e]?.hidden);if((this.dt.options.scrollY.length||this.dt.options.fixedColumns)&&t?.length){this._state.widths=[];const t={noPaging:!0};if(this.dt.options.header||this.dt.options.footer){this.dt.options.scrollY.length&&(t.unhideHeader=!0),this.dt.headerDOM&&this.dt.headerDOM.parentElement.removeChild(this.dt.headerDOM),t.noColumnWidths=!0,this.dt._renderTable(t);const i=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]);let s=0;const e=this.dt.data.headings.map((t,e)=>{if(this.settings[e]?.hidden)return 0;e=i[s].offsetWidth;return s+=1,e}),n=e.reduce((t,e)=>t+e,0);this._state.widths=e.map(t=>t/n*100)}else{t.renderHeader=!0,this.dt._renderTable(t);const a=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]);let s=0;const o=this.dt.data.headings.map((t,e)=>{if(this.settings[e]?.hidden)return 0;e=a[s].offsetWidth;return s+=1,e}),r=o.reduce((t,e)=>t+e,0);this._state.widths=o.map(t=>t/r*100)}this.dt._renderTable()}}}const Yt={sortable:!0,locale:"en",numeric:!0,caseFirst:"false",searchable:!0,sensitivity:"base",ignorePunctuation:!0,destroyable:!0,searchItemSeparator:"",searchQuerySeparator:" ",searchAnd:!1,searchMethod:!1,data:{},type:"html",format:"YYYY-MM-DD",columns:[],paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"",nextText:"",firstText:"",lastText:"",ellipsisText:"",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,footer:!1,header:!0,hiddenHeader:!1,caption:void 0,rowNavigation:!1,tabIndex:!1,pagerRender:!1,rowRender:!1,tableRender:!1,diffDomOptions:{valueDiffing:!1},labels:{placeholder:"Search...",searchTitle:"Search within table",perPage:"entries per page",pageTitle:"Page {page}",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},template:(t,e)=>`<div class='${t.classes.top}'>
    ${t.paging&&t.perPageSelect?`<div class='${t.classes.dropdown}'>
            <label>
                <select class='${t.classes.selector}' name="per-page"></select> ${t.labels.perPage}
            </label>
        </div>`:""}
    ${t.searchable?`<div class='${t.classes.search}'>
            <input class='${t.classes.input}' placeholder='${t.labels.placeholder}' type='search' name="search" title='${t.labels.searchTitle}'${e.id?` aria-controls="${e.id}"`:""}>
        </div>`:""}
</div>
<div class='${t.classes.container}'${t.scrollY.length?` style='height: ${t.scrollY}; overflow-Y: auto;'`:""}></div>
<div class='${t.classes.bottom}'>
    ${t.paging?`<div class='${t.classes.info}'></div>`:""}
    <nav class='${t.classes.pagination}'></nav>
</div>`,classes:{active:"datatable-active",ascending:"datatable-ascending",bottom:"datatable-bottom",container:"datatable-container",cursor:"datatable-cursor",descending:"datatable-descending",disabled:"datatable-disabled",dropdown:"datatable-dropdown",ellipsis:"datatable-ellipsis",filter:"datatable-filter",filterActive:"datatable-filter-active",empty:"datatable-empty",headercontainer:"datatable-headercontainer",hidden:"datatable-hidden",info:"datatable-info",input:"datatable-input",loading:"datatable-loading",pagination:"datatable-pagination",paginationList:"datatable-pagination-list",paginationListItem:"datatable-pagination-list-item",paginationListItemLink:"datatable-pagination-list-item-link",search:"datatable-search",selector:"datatable-selector",sorter:"datatable-sorter",table:"datatable-table",top:"datatable-top",wrapper:"datatable-wrapper"}},L=(t,e,s,i={})=>({nodeName:"LI",attributes:{class:i.active&&!i.hidden?s.classes.paginationListItem+" "+s.classes.active:i.hidden?`${s.classes.paginationListItem} ${s.classes.hidden} `+s.classes.disabled:s.classes.paginationListItem},childNodes:[{nodeName:"BUTTON",attributes:{"data-page":String(t),class:s.classes.paginationListItemLink,"aria-label":s.labels.pageTitle.replace("{page}",String(t))},childNodes:[{nodeName:"#text",data:e}]}]}),jt={classes:{row:"datatable-editor-row",form:"datatable-editor-form",item:"datatable-editor-item",menu:"datatable-editor-menu",save:"datatable-editor-save",block:"datatable-editor-block",cancel:"datatable-editor-cancel",close:"datatable-editor-close",inner:"datatable-editor-inner",input:"datatable-editor-input",label:"datatable-editor-label",modal:"datatable-editor-modal",action:"datatable-editor-action",header:"datatable-editor-header",wrapper:"datatable-editor-wrapper",editable:"datatable-editor-editable",container:"datatable-editor-container",separator:"datatable-editor-separator"},labels:{closeX:"x",editCell:"Edit Cell",editRow:"Edit Row",removeRow:"Remove Row",reallyRemove:"Are you sure?",reallyCancel:"Do you really want to cancel?",save:"Save",cancel:"Cancel"},cancelModal:t=>confirm(t.options.labels.reallyCancel),inline:!0,hiddenColumns:!1,contextMenu:!0,clickEvent:"dblclick",excludeColumns:[],menuItems:[{text:t=>t.options.labels.editCell,action:(t,e)=>{var s;if(t.event.target instanceof Element)return s=t.event.target.closest("td"),t.editCell(s)}},{text:t=>t.options.labels.editRow,action:(t,e)=>{var s;if(t.event.target instanceof Element)return s=t.event.target.closest("tr"),t.editRow(s)}},{separator:!0},{text:t=>t.options.labels.removeRow,action:(t,e)=>{if(t.event.target instanceof Element&&confirm(t.options.labels.reallyRemove)){const e=t.event.target.closest("tr");t.removeRow(e)}}}]};class qt{menuOpen;containerDOM;data;disabled;dt;editing;editingCell;editingRow;event;events;initialized;limits;menuDOM;modalDOM;options;originalRowRender;rect;wrapperDOM;constructor(t,e={}){this.dt=t,this.options={...jt,...e}}init(){this.initialized||(this.options.classes.editable?.split(" ").forEach(t=>this.dt.wrapperDOM.classList.add(t)),this.options.inline&&(this.originalRowRender=this.dt.options.rowRender,this.dt.options.rowRender=(t,e,s)=>{let i=this.rowRender(t,e,s);return i=this.originalRowRender?this.originalRowRender(t,i,s):i}),this.options.contextMenu&&(this.containerDOM=d("div",{id:this.options.classes.container}),this.wrapperDOM=d("div",{class:this.options.classes.wrapper}),this.menuDOM=d("ul",{class:this.options.classes.menu}),this.options.menuItems&&this.options.menuItems.length&&this.options.menuItems.forEach(e=>{const t=d("li",{class:e.separator?this.options.classes.separator:this.options.classes.item});if(!e.separator){const s=d("a",{class:this.options.classes.action,href:e.url||"#",html:"function"==typeof e.text?e.text(this):e.text});t.appendChild(s),e.action&&"function"==typeof e.action&&s.addEventListener("click",t=>{t.preventDefault(),e.action(this,t)})}this.menuDOM.appendChild(t)}),this.wrapperDOM.appendChild(this.menuDOM),this.containerDOM.appendChild(this.wrapperDOM),this.updateMenu()),this.data={},this.menuOpen=!1,this.editing=!1,this.editingRow=!1,this.editingCell=!1,this.bindEvents(),setTimeout(()=>{this.initialized=!0,this.dt.emit("editable.init")},10))}bindEvents(){this.events={keydown:this.keydown.bind(this),click:this.click.bind(this)},this.dt.dom.addEventListener(this.options.clickEvent,this.events.click),document.addEventListener("keydown",this.events.keydown),this.options.contextMenu&&(this.events.context=this.context.bind(this),this.events.updateMenu=this.updateMenu.bind(this),this.events.dismissMenu=this.dismissMenu.bind(this),this.events.reset=R(()=>this.events.updateMenu(),50),this.dt.dom.addEventListener("contextmenu",this.events.context),document.addEventListener("click",this.events.dismissMenu),window.addEventListener("resize",this.events.reset),window.addEventListener("scroll",this.events.reset))}context(s){const t=s.target;if(t instanceof Element){this.event=s;var e=t.closest("tbody td");if(!this.disabled&&e){s.preventDefault();let t=s.pageX,e=s.pageY;t>this.limits.x&&(t-=this.rect.width),e>this.limits.y&&(e-=this.rect.height),this.wrapperDOM.style.top=e+"px",this.wrapperDOM.style.left=t+"px",this.openMenu(),this.updateMenu()}}}click(t){const e=t.target;if(e instanceof Element)if(this.editing&&this.data&&this.editingCell){const t=h(this.options.classes.input),e=(this.modalDOM||this.dt.wrapperDOM).querySelector(`input${t}[type=text]`);this.saveCell(e.value)}else{var s;this.editing||(s=e.closest("tbody td"))&&(this.editCell(s),t.preventDefault())}}keydown(t){var e=h(this.options.classes.input);if(this.modalDOM){if("Escape"===t.key)this.options.cancelModal(this)&&this.closeModal();else if("Enter"===t.key)if(this.editingCell){const t=this.modalDOM.querySelector(`input${e}[type=text]`);this.saveCell(t.value)}else{const t=Array.from(this.modalDOM.querySelectorAll(`input${e}[type=text]`)).map(t=>t.value.trim());this.saveRow(t,this.data.row)}}else if(this.editing&&this.data)if("Enter"===t.key){if(this.editingCell){const t=this.dt.wrapperDOM.querySelector(`input${e}[type=text]`);this.saveCell(t.value)}else if(this.editingRow){const t=Array.from(this.dt.wrapperDOM.querySelectorAll(`input${e}[type=text]`)).map(t=>t.value.trim());this.saveRow(t,this.data.row)}}else"Escape"===t.key&&(this.editingCell?this.saveCell(this.data.content):this.editingRow&&this.saveRow(null,this.data.row))}editCell(t){var e,s=P(t.cellIndex,this.dt.columns.settings);this.options.excludeColumns.includes(s)||(t=parseInt(t.parentElement.dataset.index,10),e=this.dt.data.data[t].cells[s],this.data={cell:e,rowIndex:t,columnIndex:s,content:D(e)},this.editing=!0,this.editingCell=!0,this.options.inline?this.dt.update():this.editCellModal()),this.closeMenu()}editCellModal(){const t=this.data.cell,e=this.data.columnIndex,s=this.dt.data.headings[e].text||String(this.dt.data.headings[e].data),i=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,`<h4>${this.options.labels.editCell}</h4>`,`<button class='${this.options.classes.close}' type='button' data-editor-cancel>${this.options.labels.closeX}</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${r(s)}</label>`,`<input class='${this.options.classes.input}' value='${r(D(t))}' type='text'>`,"</div>",`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.cancel}' type='button' data-editor-cancel>${this.options.labels.cancel}</button>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>${this.options.labels.save}</button>`,"</div>","</form>","</div>","</div>"].join(""),n=d("div",{class:this.options.classes.modal,html:i}),a=(this.modalDOM=n,this.openModal(),h(this.options.classes.input)),o=n.querySelector(`input${a}[type=text]`);o.focus(),o.selectionStart=o.selectionEnd=o.value.length,n.addEventListener("click",t=>{const e=t.target;e instanceof Element&&(e.hasAttribute("data-editor-cancel")?(t.preventDefault(),this.options.cancelModal(this)&&this.closeModal()):e.hasAttribute("data-editor-save")&&(t.preventDefault(),this.saveCell(o.value)))})}saveCell(t){const e=this.data.content,s=this.dt.columns.settings[this.data.columnIndex].type||this.dt.options.type,i=t.trim();let n;if("number"===s)n={data:parseFloat(i)};else if("boolean"===s)n=["","false","0"].includes(i)?{data:!1,text:"false",order:0}:{data:!0,text:"true",order:1};else if("html"===s)n={data:[{nodeName:"#text",data:t}],text:t,order:t};else if("string"===s)n={data:t};else if("date"===s){const e=this.dt.columns.settings[this.data.columnIndex].format||this.dt.options.format;n={data:t,order:Pt(String(t),e)}}else n={data:t};this.dt.data.data[this.data.rowIndex].cells[this.data.columnIndex]=n,this.closeModal();var a=this.data.rowIndex,o=this.data.columnIndex;this.data={},this.dt.update(!0),this.editing=!1,this.editingCell=!1,this.dt.emit("editable.save.cell",t,e,a,o)}editRow(t){var e;t&&"TR"===t.nodeName&&!this.editing&&(t=parseInt(t.dataset.index,10),e=this.dt.data.data[t],this.data={row:e.cells,rowIndex:t},this.editing=!0,this.editingRow=!0,this.options.inline?this.dt.update():this.editRowModal(),this.closeMenu())}editRowModal(){const t=this.data.row,e=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,`<h4>${this.options.labels.editRow}</h4>`,`<button class='${this.options.classes.close}' type='button' data-editor-cancel>${this.options.labels.closeX}</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.cancel}' type='button' data-editor-cancel>${this.options.labels.cancel}</button>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>${this.options.labels.save}</button>`,"</div>","</form>","</div>","</div>"].join(""),s=d("div",{class:this.options.classes.modal,html:e}),i=s.firstElementChild;if(i){const n=i.lastElementChild?.firstElementChild;if(n){t.forEach((t,e)=>{const s=this.dt.columns.settings[e];if((!s.hidden||s.hidden&&this.options.hiddenColumns)&&!this.options.excludeColumns.includes(e)){const s=this.dt.data.headings[e].text||String(this.dt.data.headings[e].data);n.insertBefore(d("div",{class:this.options.classes.row,html:[`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${r(s)}</label>`,`<input class='${this.options.classes.input}' value='${r(D(t))}' type='text'>`,"</div>"].join("")}),n.lastElementChild)}}),this.modalDOM=s,this.openModal();const a=h(this.options.classes.input),o=Array.from(n.querySelectorAll(`input${a}[type=text]`));s.addEventListener("click",t=>{const e=t.target;if(e instanceof Element)if(e.hasAttribute("data-editor-cancel"))this.options.cancelModal(this)&&this.closeModal();else if(e.hasAttribute("data-editor-save")){const t=o.map(t=>t.value.trim());this.saveRow(t,this.data.row)}})}}}saveRow(a,t){const e=t.map(t=>D(t)),s=this.dt.data.data[this.data.rowIndex];if(a){let n=0;s.cells=t.map((t,e)=>{if(this.options.excludeColumns.includes(e)||this.dt.columns.settings[e].hidden)return t;var t=this.dt.columns.settings[e].type||this.dt.options.type,s=a[n++];let i;if("number"===t)i={data:parseFloat(s)};else if("boolean"===t)i=["","false","0"].includes(s)?{data:!1,text:"false",order:0}:{data:!0,text:"true",order:1};else if("html"===t)i={data:[{nodeName:"#text",data:s}],text:s,order:s};else if("string"===t)i={data:s};else if("date"===t){const a=this.dt.columns.settings[e].format||this.dt.options.format;i={data:s,order:Pt(String(s),a)}}else i={data:s};return i})}var i=s.cells.map(t=>D(t));this.data={},this.dt.update(!0),this.closeModal(),this.editing=!1,this.dt.emit("editable.save.row",i,e,t)}openModal(){this.modalDOM&&document.body.appendChild(this.modalDOM)}closeModal(){this.editing&&this.modalDOM&&(document.body.removeChild(this.modalDOM),this.modalDOM=this.editing=this.editingRow=this.editingCell=!1)}removeRow(t){t&&"TR"===t.nodeName&&!this.editing&&(t=parseInt(t.dataset.index,10),this.dt.rows.remove(t),this.closeMenu())}updateMenu(){var t=window.scrollX||window.pageXOffset,e=window.scrollY||window.pageYOffset;this.rect=this.wrapperDOM.getBoundingClientRect(),this.limits={x:window.innerWidth+t-this.rect.width,y:window.innerHeight+e-this.rect.height}}dismissMenu(e){const s=e.target;if(s instanceof Element&&!this.wrapperDOM.contains(s)){let t=!0;if(this.editing){const e=h(this.options.classes.input);t=!s.matches(`input${e}[type=text]`)}t&&this.closeMenu()}}openMenu(){var t;this.editing&&this.data&&this.editingCell&&(t=h(this.options.classes.input),t=(this.modalDOM||this.dt.wrapperDOM).querySelector(`input${t}[type=text]`),this.saveCell(t.value)),document.body.appendChild(this.containerDOM),this.menuOpen=!0,this.dt.emit("editable.context.open")}closeMenu(){this.menuOpen&&(this.menuOpen=!1,document.body.removeChild(this.containerDOM),this.dt.emit("editable.context.close"))}destroy(){this.dt.dom.removeEventListener(this.options.clickEvent,this.events.click),this.dt.dom.removeEventListener("contextmenu",this.events.context),document.removeEventListener("click",this.events.dismissMenu),document.removeEventListener("keydown",this.events.keydown),window.removeEventListener("resize",this.events.reset),window.removeEventListener("scroll",this.events.reset),document.body.contains(this.containerDOM)&&document.body.removeChild(this.containerDOM),this.options.inline&&(this.dt.options.rowRender=this.originalRowRender),this.initialized=!1}rowRender(n,a,t){return this.data&&this.data.rowIndex===t&&(this.editingCell?a.childNodes[function(t,e){let s=t,i=0;for(;i<t;)e[i].hidden&&--s,i++;return s}(this.data.columnIndex,this.dt.columns.settings)].childNodes=[{nodeName:"INPUT",attributes:{type:"text",value:this.data.content,class:this.options.classes.input}}]:a.childNodes.forEach((t,e)=>{var s=P(e,this.dt.columns.settings),i=n[s];this.options.excludeColumns.includes(s)||(a.childNodes[e].childNodes=[{nodeName:"INPUT",attributes:{type:"text",value:r(i.text||String(i.data)||""),class:this.options.classes.input}}])})),a}}const Ft={classes:{button:"datatable-column-filter-button",menu:"datatable-column-filter-menu",container:"datatable-column-filter-container",wrapper:"datatable-column-filter-wrapper"},labels:{button:"Filter columns within the table"},hiddenColumns:[]};class Bt{addedButtonDOM;menuOpen;buttonDOM;dt;events;initialized;options;menuDOM;containerDOM;wrapperDOM;limits;rect;event;constructor(t,e={}){this.dt=t,this.options={...Ft,...e}}init(){if(!this.initialized){const e=h(this.options.classes.button);let t=this.dt.wrapperDOM.querySelector(e);if(!t){t=d("button",{class:this.options.classes.button,html:""});const e=h(this.dt.options.classes.search),s=this.dt.wrapperDOM.querySelector(e);(s||this.dt.wrapperDOM).appendChild(t),this.addedButtonDOM=!0}this.buttonDOM=t,this.containerDOM=d("div",{id:this.options.classes.container}),this.wrapperDOM=d("div",{class:this.options.classes.wrapper}),this.menuDOM=d("ul",{class:this.options.classes.menu,html:this.dt.data.headings.map((t,e)=>{var s=this.dt.columns.settings[e];return this.options.hiddenColumns.includes(e)?"":`<li data-column="${e}">
                        <input type="checkbox" value="${t.text||t.data}" ${s.hidden?"":"checked=''"}>
                        <label>
                            ${t.text||t.data}
                        </label>
                    </li>`}).join("")}),this.wrapperDOM.appendChild(this.menuDOM),this.containerDOM.appendChild(this.wrapperDOM),this._measureSpace(),this._bind(),this.initialized=!0}}dismiss(){this.addedButtonDOM&&this.buttonDOM.parentElement&&this.buttonDOM.parentElement.removeChild(this.buttonDOM),document.removeEventListener("click",this.events.click)}_bind(){this.events={click:this._click.bind(this)},document.addEventListener("click",this.events.click)}_openMenu(){document.body.appendChild(this.containerDOM),this._measureSpace(),this.menuOpen=!0,this.dt.emit("columnFilter.menu.open")}_closeMenu(){this.menuOpen&&(this.menuOpen=!1,document.body.removeChild(this.containerDOM),this.dt.emit("columnFilter.menu.close"))}_measureSpace(){var t=window.scrollX||window.pageXOffset,e=window.scrollY||window.pageYOffset;this.rect=this.wrapperDOM.getBoundingClientRect(),this.limits={x:window.innerWidth+t-this.rect.width,y:window.innerHeight+e-this.rect.height}}_click(s){const t=s.target;if(t instanceof Element)if(this.event=s,this.buttonDOM.contains(t))if(s.preventDefault(),this.menuOpen)this._closeMenu();else{this._openMenu();let t=s.pageX,e=s.pageY;t>this.limits.x&&(t-=this.rect.width),e>this.limits.y&&(e-=this.rect.height),this.wrapperDOM.style.top=e+"px",this.wrapperDOM.style.left=t+"px"}else if(this.menuDOM.contains(t)){const s=h(this.options.classes.menu),i=t.closest(s+" > li");if(i){const n=i.querySelector("input[type=checkbox]");n.contains(t)||(n.checked=!n.checked);var e=Number(i.dataset.column);n.checked?this.dt.columns.show([e]):this.dt.columns.hide([e])}}else this.menuOpen&&this._closeMenu()}}zt.DataTable=class{columns;containerDOM;_currentPage;data;_dd;dom;_events;hasHeadings;hasRows;headerDOM;_initialHTML;initialized;_label;lastPage;_listeners;onFirstPage;onLastPage;options;_pagerDOMs;_virtualPagerDOM;pages;_rect;rows;_searchData;_searchQueries;_tableAttributes;_tableFooters;_tableCaptions;totalPages;_virtualDOM;_virtualHeaderDOM;wrapperDOM;constructor(t,e={}){const s="string"==typeof t?document.querySelector(t):t;s instanceof HTMLTableElement?this.dom=s:(this.dom=document.createElement("table"),s.appendChild(this.dom));var t={...Yt.diffDomOptions,...e.diffDomOptions},i={...Yt.labels,...e.labels},n={...Yt.classes,...e.classes};this.options={...Yt,...e,diffDomOptions:t,labels:i,classes:n},this._initialHTML=this.options.destroyable?s.outerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&-1===this.dom.tabIndex&&(this.dom.tabIndex=0),this._listeners={onResize:()=>this._onResize()},this._dd=new pt(this.options.diffDomOptions||{}),this.initialized=!1,this._events={},this._currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this._searchQueries=[],this.init()}init(){if(this.initialized||Y(this.dom,this.options.classes.table))return!1;this._virtualDOM=p(this.dom,this.options.diffDomOptions||{}),this._tableAttributes={...this._virtualDOM.attributes},this._tableFooters=this._virtualDOM.childNodes?.filter(t=>"TFOOT"===t.nodeName)??[],this._tableCaptions=this._virtualDOM.childNodes?.filter(t=>"CAPTION"===t.nodeName)??[],void 0!==this.options.caption&&this._tableCaptions.push({nodeName:"CAPTION",childNodes:[{nodeName:"#text",data:this.options.caption}]}),this.rows=new Ht(this),this.columns=new It(this),this.data=Rt(this.options.data,this.dom,this.columns.settings,this.options.type,this.options.format),this._render(),setTimeout(()=>{this.emit("datatable.init"),this.initialized=!0},10)}_render(){this.wrapperDOM=d("div",{class:this.options.classes.wrapper+" "+this.options.classes.loading}),this.wrapperDOM.innerHTML=this.options.template(this.options,this.dom);const t=h(this.options.classes.selector),i=this.wrapperDOM.querySelector("select"+t);i&&this.options.paging&&this.options.perPageSelect?this.options.perPageSelect.forEach(t=>{var[t,e]=Array.isArray(t)?[t[0],t[1]]:[String(t),t],s=e===this.options.perPage,t=new Option(t,String(e),s,s);i.appendChild(t)}):i&&i.parentElement.removeChild(i);var e=h(this.options.classes.container),e=(this.containerDOM=this.wrapperDOM.querySelector(e),this._pagerDOMs=[],h(this.options.classes.pagination)),e=(Array.from(this.wrapperDOM.querySelectorAll(e)).forEach(t=>{t instanceof HTMLElement&&(t.innerHTML=`<ul class="${this.options.classes.paginationList}"></ul>`,this._pagerDOMs.push(t.firstElementChild))}),this._virtualPagerDOM={nodeName:"UL",attributes:{class:this.options.classes.paginationList}},h(this.options.classes.info));this._label=this.wrapperDOM.querySelector(e),this.dom.parentElement.replaceChild(this.wrapperDOM,this.dom),this.containerDOM.appendChild(this.dom),this._rect=this.dom.getBoundingClientRect(),this._fixHeight(),this.options.header||this.wrapperDOM.classList.add("no-header"),this.options.footer||this.wrapperDOM.classList.add("no-footer"),this.options.sortable&&this.wrapperDOM.classList.add("sortable"),this.options.searchable&&this.wrapperDOM.classList.add("searchable"),this.options.fixedHeight&&this.wrapperDOM.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapperDOM.classList.add("fixed-columns"),this._bindEvents(),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}_renderTable(t={}){var e=(this.options.paging||this._searchQueries.length||this.columns._state.filters.length)&&this._currentPage&&this.pages.length&&!t.noPaging?this.pages[this._currentPage-1]:this.data.data.map((t,e)=>({row:t,index:e}));let s=gt(this._tableAttributes,this.data.headings,e,this.columns.settings,this.columns._state,this.rows.cursor,this.options,t,this._tableFooters,this._tableCaptions);if(this.options.tableRender){const t=this.options.tableRender(this.data,s,"main");t&&(s=t)}e=this._dd.diff(this._virtualDOM,s);this._dd.apply(this.dom,e),this._virtualDOM=s}_renderPage(t=!1){this.hasRows&&this.totalPages?(this._currentPage>this.totalPages&&(this._currentPage=1),this._renderTable(),this.onFirstPage=1===this._currentPage,this.onLastPage=this._currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let e,s,i=0,n=0;if(this.totalPages&&(s=this._currentPage-1,i=s*this.options.perPage,n=i+this.pages[s].length,i+=1,e=(this._searchQueries.length?this._searchData:this.data.data).length),this._label&&this.options.labels.info.length){const t=this.options.labels.info.replace("{start}",String(i)).replace("{end}",String(n)).replace("{page}",String(this._currentPage)).replace("{pages}",String(this.totalPages)).replace("{rows}",String(e));this._label.innerHTML=e?t:""}if(1==this._currentPage&&this._fixHeight(),this.options.rowNavigation&&this._currentPage&&(!this.rows.cursor||!this.pages[this._currentPage-1].find(t=>t.index===this.rows.cursor))){const e=this.pages[this._currentPage-1];e.length&&(t?this.rows.setCursor(e[e.length-1].index):this.rows.setCursor(e[0].index))}}_renderPagers(){if(this.options.paging){let t=((t,e,h,s,u)=>{let i=[];if(u.firstLast&&i.push(L(1,u.firstText,u)),u.nextPrev){const e=t?1:h-1;i.push(L(e,u.prevText,u,{hidden:t}))}let n=[...Array(s).keys()].map(t=>L(t+1,String(t+1),u,{active:t===h-1}));if(u.truncatePager&&(n=((s,e)=>{const t=u.pagerDelta,i=u.classes,n=u.ellipsisText,a=2*t;let o=h-t,r=h+t;h<4-t+a?r=3+a:e-(3-t+a)<h&&(o=e-(2+a));const l=[];for(let t=1;t<=e;t++)if(1==t||t==e||t>=o&&t<=r){const e=s[t-1];l.push(e)}let d;const c=[];return l.forEach(t=>{var e=parseInt(t.childNodes[0].attributes["data-page"],10);if(d){const t=parseInt(d.childNodes[0].attributes["data-page"],10);if(e-t==2)c.push(s[t]);else if(e-t!=1){const s={nodeName:"LI",attributes:{class:`${i.paginationListItem} ${i.ellipsis} `+i.disabled},childNodes:[{nodeName:"BUTTON",attributes:{class:i.paginationListItemLink},childNodes:[{nodeName:"#text",data:n}]}]};c.push(s)}}c.push(t),d=t}),c})(n,s)),i=i.concat(n),u.nextPrev){const t=e?s:h+1;i.push(L(t,u.nextText,u,{hidden:e}))}return u.firstLast&&i.push(L(s,u.lastText,u)),{nodeName:"UL",attributes:{class:u.classes.paginationList},childNodes:1<n.length?i:[]}})(this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages,this.options);if(this.options.pagerRender){const e=this.options.pagerRender([this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages],t);e&&(t=e)}const e=this._dd.diff(this._virtualPagerDOM,t);this._pagerDOMs.forEach(t=>{this._dd.apply(t,e)}),this._virtualPagerDOM=t}}_renderSeparateHeader(){const t=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this._virtualHeaderDOM={nodeName:"DIV"}),t.parentElement.insertBefore(this.headerDOM,t);let e={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[mt(this.data.headings,this.columns.settings,this.columns._state,this.options,{unhideHeader:!0})]}]};if(e.attributes.class=M(e.attributes.class,this.options.classes.table),this.options.tableRender){const t=this.options.tableRender(this.data,e,"header");t&&(e=t)}var s={nodeName:"DIV",attributes:{class:this.options.classes.headercontainer},childNodes:[e]},i=this._dd.diff(this._virtualHeaderDOM,s),i=(this._dd.apply(this.headerDOM,i),this._virtualHeaderDOM=s,this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth);if(i){const t=structuredClone(this._virtualHeaderDOM),e=(t.attributes.style=`padding-right: ${i}px;`,this._dd.diff(this._virtualHeaderDOM,t));this._dd.apply(this.headerDOM,e),this._virtualHeaderDOM=t}t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}_bindEvents(){if(this.options.perPageSelect){const t=h(this.options.classes.selector),e=this.wrapperDOM.querySelector(t);e&&e instanceof HTMLSelectElement&&e.addEventListener("change",()=>{this.emit("datatable.perpage:before",this.options.perPage),this.options.perPage=parseInt(e.value,10),this.update(),this._fixHeight(),this.emit("datatable.perpage",this.options.perPage)},!1)}this.options.searchable&&this.wrapperDOM.addEventListener("input",t=>{const e=h(this.options.classes.input),s=t.target;if(s instanceof HTMLInputElement&&s.matches(e)){t.preventDefault();const i=[];if(Array.from(this.wrapperDOM.querySelectorAll(e)).filter(t=>t.value.length).forEach(e=>{const t=e.dataset.and||this.options.searchAnd,s=e.dataset.querySeparator||this.options.searchQuerySeparator?e.value.split(this.options.searchQuerySeparator):[e.value];t?s.forEach(t=>{e.dataset.columns?i.push({terms:[t],columns:JSON.parse(e.dataset.columns)}):i.push({terms:[t],columns:void 0})}):e.dataset.columns?i.push({terms:s,columns:JSON.parse(e.dataset.columns)}):i.push({terms:s,columns:void 0})}),1===i.length&&1===i[0].terms.length){const t=i[0];this.search(t.terms[0],t.columns)}else this.multiSearch(i)}}),this.wrapperDOM.addEventListener("click",t=>{const e=t.target.closest("a, button");var s;e&&(e.hasAttribute("data-page")?(this.page(parseInt(e.getAttribute("data-page"),10)),t.preventDefault()):Y(e,this.options.classes.sorter)?(s=Array.from(e.parentElement.parentElement.children).indexOf(e.parentElement),s=P(s,this.columns.settings),this.columns.sort(s),t.preventDefault()):Y(e,this.options.classes.filter)&&(s=Array.from(e.parentElement.parentElement.children).indexOf(e.parentElement),s=P(s,this.columns.settings),this.columns.filter(s),t.preventDefault()))},!1),this.options.rowNavigation?(this.dom.addEventListener("keydown",t=>{if("ArrowUp"===t.key){let e;t.preventDefault(),t.stopPropagation(),this.pages[this._currentPage-1].find(t=>t.index===this.rows.cursor||(e=t,!1)),e?this.rows.setCursor(e.index):this.onFirstPage||this.page(this._currentPage-1,!0)}else if("ArrowDown"===t.key){let e;t.preventDefault(),t.stopPropagation();var s=this.pages[this._currentPage-1].find(t=>!!e||(t.index===this.rows.cursor&&(e=!0),!1));s?this.rows.setCursor(s.index):this.onLastPage||this.page(this._currentPage+1)}else["Enter"," "].includes(t.key)&&this.emit("datatable.selectrow",this.rows.cursor,t)}),this.dom.addEventListener("mousedown",t=>{const e=t.target;var s;e instanceof Element&&this.dom.matches(":focus")&&((s=Array.from(this.dom.querySelectorAll("tbody > tr")).find(t=>t.contains(e)))&&s instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(s.dataset.index,10),t))})):this.dom.addEventListener("mousedown",t=>{const e=t.target;var s;e instanceof Element&&((s=Array.from(this.dom.querySelectorAll("tbody > tr")).find(t=>t.contains(e)))&&s instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(s.dataset.index,10),t))}),window.addEventListener("resize",this._listeners.onResize)}_onResize=R(()=>{this._rect=this.containerDOM.getBoundingClientRect(),this._rect.width&&this.update(!0)},250);destroy(){if(this.options.destroyable){if(this.wrapperDOM){const e=this.wrapperDOM.parentElement;if(e){const s=d("div");s.innerHTML=this._initialHTML;var t=s.firstElementChild;e.replaceChild(t,this.wrapperDOM),this.dom=t}else this.options.classes.table?.split(" ").forEach(t=>this.wrapperDOM.classList.remove(t))}window.removeEventListener("resize",this._listeners.onResize),this.initialized=!1}}update(t=!1){this.emit("datatable.update:before"),t&&(this.columns._measureWidths(),this.hasRows=Boolean(this.data.data.length),this.hasHeadings=Boolean(this.data.headings.length)),this.options.classes.empty?.split(" ").forEach(t=>this.wrapperDOM.classList.remove(t)),this._paginate(),this._renderPage(),this._renderPagers(),this.options.scrollY.length&&this._renderSeparateHeader(),this.emit("datatable.update")}_paginate(){let i=this.data.data.map((t,e)=>({row:t,index:e}));return this._searchQueries.length&&(i=[],this._searchData.forEach(t=>i.push({index:t,row:this.data.data[t]}))),this.columns._state.filters.length&&this.columns._state.filters.forEach((e,s)=>{e&&(i=i.filter(t=>{t=t.row.cells[s];return"function"==typeof e?e(t.data):D(t)===e}))}),this.options.paging&&0<this.options.perPage?this.pages=i.map((t,e)=>e%this.options.perPage==0?i.slice(e,e+this.options.perPage):null).filter(t=>t):this.pages=[i],this.totalPages=this.lastPage=this.pages.length,this._currentPage||(this._currentPage=1),this.totalPages}_fixHeight(){this.options.fixedHeight&&(this.containerDOM.style.height=null,this._rect=this.containerDOM.getBoundingClientRect(),this.containerDOM.style.height=this._rect.height+"px")}search(t,e=void 0,s="search"){if(this.emit("datatable.search:before",t,this._searchData),!t.length)return this._currentPage=1,this._searchQueries=[],this._searchData=[],this.update(),this.emit("datatable.search","",[]),this.wrapperDOM.classList.remove("search-results"),!1;this.multiSearch([{terms:[t],columns:e||void 0}],s),this.emit("datatable.search",t,this._searchData)}multiSearch(t,e="search"){if(!this.hasRows)return!1;this._currentPage=1,this._searchData=[];let o=t.map(t=>({columns:t.columns,terms:t.terms.map(t=>t.trim()).filter(t=>t),source:e})).filter(t=>t.terms.length);if(this.emit("datatable.multisearch:before",o,this._searchData),e.length&&(o=o.concat(this._searchQueries.filter(t=>t.source!==e))),!(this._searchQueries=o).length)return this.update(),this.emit("datatable.multisearch",o,this._searchData),this.wrapperDOM.classList.remove("search-results"),!1;const s=o.map(i=>this.columns.settings.map((t,e)=>{if(t.hidden||!t.searchable||i.columns&&!i.columns.includes(e))return!1;let s=i.terms;e=t.sensitivity||this.options.sensitivity;return["base","accent"].includes(e)&&(s=s.map(t=>t.toLowerCase())),["base","case"].includes(e)&&(s=s.map(t=>t.normalize("NFD").replace(/\p{Diacritic}/gu,""))),s=t.ignorePunctuation??this.options.ignorePunctuation?s.map(t=>t.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,"")):s}));this.data.data.forEach((n,t)=>{const a=n.cells.map((t,e)=>{e=this.columns.settings[e];if(e.searchMethod||this.options.searchMethod)return t;let s=D(t).trim();if(s.length){const t=e.sensitivity||this.options.sensitivity;["base","accent"].includes(t)&&(s=s.toLowerCase()),["base","case"].includes(t)&&(s=s.normalize("NFD").replace(/\p{Diacritic}/gu,"")),(e.ignorePunctuation??this.options.ignorePunctuation)&&(s=s.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,""))}t=e.searchItemSeparator||this.options.searchItemSeparator;return t?s.split(t):[s]});s.every((t,i)=>t.find((t,s)=>{if(!t)return!1;const e=this.columns.settings[s].searchMethod||this.options.searchMethod;return e?e(t,a[s],n,s,o[i].source):t.find(e=>a[s].find(t=>t.includes(e)))}))&&this._searchData.push(t)}),this.wrapperDOM.classList.add("search-results"),this._searchData.length?this.update():(this.wrapperDOM.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),this.emit("datatable.multisearch",o,this._searchData)}page(t,e=!1){return this.emit("datatable.page:before",t),t!==this._currentPage&&(isNaN(t)||(this._currentPage=t),!(t>this.pages.length||t<0)&&(this._renderPage(e),this._renderPagers(),void this.emit("datatable.page",t)))}insert(t){let e=[];if(Array.isArray(t)){const l=this.data.headings.map(t=>t.data?String(t.data):t.text);t.forEach((t,i)=>{const n=[];Object.entries(t).forEach(([t,e])=>{var s=l.indexOf(t);-1<s?n[s]=T(e,this.columns.settings[s]):this.hasHeadings||this.hasRows||0!==i||(n[l.length]=T(e,this.columns.settings[l.length]),l.push(t),this.data.headings.push(A(t)))}),e.push({cells:n})})}else l(t)&&(!t.headings||this.hasHeadings||this.hasRows?t.data&&Array.isArray(t.data)&&(e=t.data.map(t=>{let e,s;return s=Array.isArray(t)?(e={},t):(e=t.attributes,t.cells),{attributes:e,cells:s.map((t,e)=>T(t,this.columns.settings[e]))}})):this.data=Rt(t,void 0,this.columns.settings,this.options.type,this.options.format));e.length&&e.forEach(t=>this.data.data.push(t)),this.hasHeadings=Boolean(this.data.headings.length),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}refresh(){var t;this.emit("datatable.refresh:before"),this.options.searchable&&(t=h(this.options.classes.input),Array.from(this.wrapperDOM.querySelectorAll(t)).forEach(t=>t.value=""),this._searchQueries=[]),this._currentPage=1,this.onFirstPage=!0,this.update(!0),this.emit("datatable.refresh")}print(){const t=d("table");let e=gt(this._tableAttributes,this.data.headings,this.data.data.map((t,e)=>({row:t,index:e})),this.columns.settings,this.columns._state,!1,this.options,{noColumnWidths:!0,unhideHeader:!0},this._tableFooters,this._tableCaptions);if(this.options.tableRender){const t=this.options.tableRender(this.data,e,"print");t&&(e=t)}var s=this._dd.diff({nodeName:"TABLE"},e);this._dd.apply(t,s);const i=window.open();i.document.body.appendChild(t),i.print()}setMessage(t){var e=this.data.headings.filter((t,e)=>!this.columns.settings[e]?.hidden).length||1;this.options.classes.empty?.split(" ").forEach(t=>this.wrapperDOM.classList.add(t)),this._label&&(this._label.innerHTML=""),this.totalPages=0,this._renderPagers();let s={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[mt(this.data.headings,this.columns.settings,this.columns._state,this.options,{})]},{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:this.options.classes.empty,colspan:String(e)},childNodes:[{nodeName:"#text",data:t}]}]}]}]};if(this._tableFooters.forEach(t=>s.childNodes.push(t)),this._tableCaptions.forEach(t=>s.childNodes.push(t)),s.attributes.class=M(s.attributes.class,this.options.classes.table),this.options.tableRender){const t=this.options.tableRender(this.data,s,"message");t&&(s=t)}e=this._dd.diff(this._virtualDOM,s);this._dd.apply(this.dom,e),this._virtualDOM=s}on(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)}off(t,e){t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)}emit(e,...s){if(e in this._events!=0)for(let t=0;t<this._events[e].length;t++)this._events[e][t](...s)}},zt.addColumnFilter=function(t,e={}){const s=new Bt(t,e);return t.initialized?s.init():t.on("datatable.init",()=>s.init()),s},zt.convertCSV=function(t){let i;if(!l(t))return!1;const n={lineDelimiter:"\n",columnDelimiter:",",removeDoubleQuotes:!1,...t};if(n.data.length){i={data:[]};const l=n.data.split(n.lineDelimiter);if(l.length&&(n.headings&&(i.headings=l[0].split(n.columnDelimiter),n.removeDoubleQuotes&&(i.headings=i.headings.map(t=>t.trim().replace(/(^"|"$)/g,""))),l.shift()),l.forEach((t,e)=>{i.data[e]=[];const s=t.split(n.columnDelimiter);s.length&&s.forEach(t=>{n.removeDoubleQuotes&&(t=t.trim().replace(/(^"|"$)/g,"")),i.data[e].push(t)})})),i)return i}return!1},zt.convertJSON=function(t){let i;if(!l(t))return!1;t={data:"",...t};if(t.data.length||l(t.data)){const l=!!H(t.data)&&JSON.parse(t.data);if(l?(i={headings:[],data:[]},l.forEach((t,s)=>{i.data[s]=[],Object.entries(t).forEach(([t,e])=>{i.headings.includes(t)||i.headings.push(t),i.data[s].push(e)})})):console.warn("That's not valid JSON!"),i)return i}return!1},zt.createElement=d,zt.exportCSV=function(s,t={}){if(!s.hasHeadings&&!s.hasRows)return!1;if(!l(t))return!1;const i={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",...t},n=t=>!i.skipColumn.includes(t)&&!s.columns.settings[t]?.hidden,e=s.data.headings.filter((t,e)=>n(e)).map(t=>t.text??t.data);let a;if(i.selection)if(Array.isArray(i.selection)){a=[];for(let t=0;t<i.selection.length;t++)a=a.concat(s.pages[i.selection[t]-1].map(t=>t.row))}else a=s.pages[i.selection-1].map(t=>t.row);else a=s.data.data;let o=[];if(o[0]=e,(o=o.concat(a.map(t=>t.cells.filter((t,e)=>n(e)).map(t=>D(t))))).length){let e="";if(o.forEach(t=>{t.forEach(t=>{"string"==typeof t&&(t=(t=(t=(t=(t=t.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(t=`"${t}"`),e+=t+i.columnDelimiter}),e=e.trim().substring(0,e.length-1),e+=i.lineDelimiter}),e=e.trim().substring(0,e.length-1),i.download){const s=document.createElement("a");s.href=encodeURI("data:text/csv;charset=utf-8,"+e),s.download=`${i.filename||"datatable_export"}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}return e}return!1},zt.exportJSON=function(e,t={}){if(!e.hasHeadings&&!e.hasRows)return!1;if(!l(t))return!1;const s={download:!0,skipColumn:[],replacer:null,space:4,...t},i=t=>!s.skipColumn.includes(t)&&!e.columns.settings[t]?.hidden;let n;if(s.selection)if(Array.isArray(s.selection)){n=[];for(let t=0;t<s.selection.length;t++)n=n.concat(e.pages[s.selection[t]-1].map(t=>t.row))}else n=e.pages[s.selection-1].map(t=>t.row);else n=e.data.data;const a=n.map(t=>t.cells.filter((t,e)=>i(e)).map(t=>D(t))),o=e.data.headings.filter((t,e)=>i(e)).map(t=>t.text??String(t.data));if(a.length){const l=[],e=(a.forEach((t,s)=>{l[s]=l[s]||{},t.forEach((t,e)=>{l[s][o[e]]=t})}),JSON.stringify(l,s.replacer,s.space));if(s.download){const l=new Blob([e],{type:"data:application/json;charset=utf-8"}),t=URL.createObjectURL(l),D=document.createElement("a");D.href=t,D.download=`${s.filename||"datatable_export"}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(t)}return e}return!1},zt.exportSQL=function(s,t={}){if(!s.hasHeadings&&!s.hasRows)return!1;if(!l(t))return!1;const i={download:!0,skipColumn:[],tableName:"myTable",...t},n=t=>!i.skipColumn.includes(t)&&!s.columns.settings[t]?.hidden;let e=[];if(i.selection)if(Array.isArray(i.selection))for(let t=0;t<i.selection.length;t++)e=e.concat(s.pages[i.selection[t]-1].map(t=>t.row));else e=s.pages[i.selection-1].map(t=>t.row);else e=s.data.data;const a=e.map(t=>t.cells.filter((t,e)=>n(e)).map(t=>D(t))),o=s.data.headings.filter((t,e)=>n(e)).map(t=>t.text??String(t.data));if(a.length){let e=`INSERT INTO \`${i.tableName}\` (`;if(o.forEach(t=>{e+=`\`${t}\`,`}),e=e.trim().substring(0,e.length-1),e+=") VALUES ",a.forEach(t=>{e+="(",t.forEach(t=>{e+="string"==typeof t?`"${t}",`:t+","}),e=e.trim().substring(0,e.length-1),e+="),"}),e=e.trim().substring(0,e.length-1),e+=";",i.download&&(e="data:application/sql;charset=utf-8,"+e),i.download){const s=document.createElement("a");s.href=encodeURI(e),s.download=`${i.filename||"datatable_export"}.sql`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}return e}return!1},zt.exportTXT=function(s,t={}){if(!s.hasHeadings&&!s.hasRows)return!1;if(!l(t))return!1;const i={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",...t},n=t=>!i.skipColumn.includes(t)&&!s.columns.settings[t]?.hidden,e=s.data.headings.filter((t,e)=>n(e)).map(t=>t.text??t.data);let a;if(i.selection)if(Array.isArray(i.selection)){a=[];for(let t=0;t<i.selection.length;t++)a=a.concat(s.pages[i.selection[t]-1].map(t=>t.row))}else a=s.pages[i.selection-1].map(t=>t.row);else a=s.data.data;let o=[];if(o[0]=e,(o=o.concat(a.map(t=>t.cells.filter((t,e)=>n(e)).map(t=>D(t))))).length){let e="";if(o.forEach(t=>{t.forEach(t=>{"string"==typeof t&&(t=(t=(t=(t=(t=t.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(t=`"${t}"`),e+=t+i.columnDelimiter}),e=e.trim().substring(0,e.length-1),e+=i.lineDelimiter}),e=e.trim().substring(0,e.length-1),i.download&&(e="data:text/csv;charset=utf-8,"+e),i.download){const s=document.createElement("a");s.href=encodeURI(e),s.download=`${i.filename||"datatable_export"}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}return e}return!1},zt.isJson=H,zt.isObject=l,zt.makeEditable=function(t,e={}){const s=new qt(t,e);return t.initialized?s.init():t.on("datatable.init",()=>s.init()),s}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});